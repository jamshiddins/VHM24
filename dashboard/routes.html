<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VHM24 - Управление маршрутами</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <div class="header">
            <div>
                <h1><i class="fas fa-route"></i> Управление маршрутами</h1>
                <p class="subtitle">Планирование и оптимизация маршрутов для операторов</p>
            </div>
            <div class="navigation">
                <a href="index.html" class="nav-button"><i class="fas fa-tachometer-alt"></i> Дашборд</a>
                <a href="analytics.html" class="nav-button"><i class="fas fa-chart-pie"></i> Аналитика</a>
                <a href="tasks.html" class="nav-button"><i class="fas fa-tasks"></i> Задачи</a>
                <a href="admin.html" class="nav-button"><i class="fas fa-cogs"></i> Администрирование</a>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Routes List Panel -->
            <div class="panel">
                <h2><i class="fas fa-list"></i> Список маршрутов</h2>
                
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Поиск маршрутов..." id="route-search">
                </div>
                
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="all">Все</button>
                    <button class="filter-btn" data-filter="active">Активные</button>
                    <button class="filter-btn" data-filter="inactive">Неактивные</button>
                </div>
                
                <div class="route-list" id="route-list">
                    <div class="route-item active" data-id="1" data-status="active">
                        <h4>
                            <span>Маршрут #1: Центральный</span>
                            <span class="route-status status-active">Активен</span>
                        </h4>
                        <p>Оператор: Алексей К.</p>
                        <p>Автоматы: 5</p>
                        <div class="route-meta">
                            <span>Создан: 10.06.2025</span>
                            <span>Последнее обновление: 15.07.2025</span>
                        </div>
                    </div>
                    <div class="route-item" data-id="2" data-status="active">
                        <h4>
                            <span>Маршрут #2: Северный</span>
                            <span class="route-status status-active">Активен</span>
                        </h4>
                        <p>Оператор: Мария П.</p>
                        <p>Автоматы: 7</p>
                        <div class="route-meta">
                            <span>Создан: 15.06.2025</span>
                            <span>Последнее обновление: 10.07.2025</span>
                        </div>
                    </div>
                    <div class="route-item" data-id="3" data-status="inactive">
                        <h4>
                            <span>Маршрут #3: Южный</span>
                            <span class="route-status status-inactive">Неактивен</span>
                        </h4>
                        <p>Оператор: Не назначен</p>
                        <p>Автоматы: 4</p>
                        <div class="route-meta">
                            <span>Создан: 20.06.2025</span>
                            <span>Последнее обновление: 05.07.2025</span>
                        </div>
                    </div>
                    <div class="route-item" data-id="4" data-status="active">
                        <h4>
                            <span>Маршрут #4: Восточный</span>
                            <span class="route-status status-active">Активен</span>
                        </h4>
                        <p>Оператор: Дмитрий С.</p>
                        <p>Автоматы: 6</p>
                        <div class="route-meta">
                            <span>Создан: 25.06.2025</span>
                            <span>Последнее обновление: 12.07.2025</span>
                        </div>
                    </div>
                    <div class="route-item" data-id="5" data-status="inactive">
                        <h4>
                            <span>Маршрут #5: Западный</span>
                            <span class="route-status status-inactive">Неактивен</span>
                        </h4>
                        <p>Оператор: Не назначен</p>
                        <p>Автоматы: 3</p>
                        <div class="route-meta">
                            <span>Создан: 30.06.2025</span>
                            <span>Последнее обновление: 08.07.2025</span>
                        </div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-success" id="create-route"><i class="fas fa-plus"></i> Создать маршрут</button>
                </div>
            </div>
            
            <!-- Route Details and Map Panel -->
            <div class="panel">
                <div class="route-details-header">
                    <h2><i class="fas fa-info-circle"></i> Детали маршрута #1</h2>
                    <div>
                        <button class="btn" id="view-map-btn"><i class="fas fa-map-marked-alt"></i> Карта</button>
                    </div>
                </div>
                
                <!-- Route Details -->
                <div class="route-details" id="route-details">
                    <div class="route-details-meta">
                        <div class="route-meta-item">
                            <div class="label">Статус</div>
                            <div class="value"><span class="route-status status-active">Активен</span></div>
                        </div>
                        <div class="route-meta-item">
                            <div class="label">Оператор</div>
                            <div class="value">Алексей К.</div>
                        </div>
                        <div class="route-meta-item">
                            <div class="label">Количество автоматов</div>
                            <div class="value">5</div>
                        </div>
                        <div class="route-meta-item">
                            <div class="label">Последнее обслуживание</div>
                            <div class="value">15.07.2025</div>
                        </div>
                    </div>
                    
                    <div class="route-details-section">
                        <h3>Описание</h3>
                        <p>Маршрут охватывает центральную часть города. Включает автоматы в торговых центрах и бизнес-центрах. Обслуживание проводится 3 раза в неделю.</p>
                    </div>
                    
                    <div class="route-details-section">
                        <h3>Автоматы на маршруте</h3>
                        <div class="machines-list">
                            <div class="machine-item">
                                <div class="machine-header">
                                    <span class="machine-name">VM-001 (ТЦ Mega Planet)</span>
                                    <span class="machine-status status-operational">Работает</span>
                                </div>
                                <div class="machine-details">
                                    <p>Адрес: ул. Пушкина, 10</p>
                                    <p>Последнее обслуживание: 15.07.2025</p>
                                    <p>Статус запасов: 75%</p>
                                </div>
                            </div>
                            <div class="machine-item">
                                <div class="machine-header">
                                    <span class="machine-name">VM-015 (БЦ Сити)</span>
                                    <span class="machine-status status-warning">Требует внимания</span>
                                </div>
                                <div class="machine-details">
                                    <p>Адрес: ул. Ленина, 25</p>
                                    <p>Последнее обслуживание: 13.07.2025</p>
                                    <p>Статус запасов: 30%</p>
                                </div>
                            </div>
                            <div class="machine-item">
                                <div class="machine-header">
                                    <span class="machine-name">VM-028 (Метро Олмазор)</span>
                                    <span class="machine-status status-operational">Работает</span>
                                </div>
                                <div class="machine-details">
                                    <p>Адрес: ул. Мирзо Улугбека, 5</p>
                                    <p>Последнее обслуживание: 14.07.2025</p>
                                    <p>Статус запасов: 60%</p>
                                </div>
                            </div>
                            <div class="machine-item">
                                <div class="machine-header">
                                    <span class="machine-name">VM-042 (УзЭкспоЦентр)</span>
                                    <span class="machine-status status-error">Ошибка</span>
                                </div>
                                <div class="machine-details">
                                    <p>Адрес: ул. Амира Темура, 107</p>
                                    <p>Последнее обслуживание: 10.07.2025</p>
                                    <p>Статус запасов: 85%</p>
                                    <p class="error-message">Ошибка: Неисправен купюроприемник</p>
                                </div>
                            </div>
                            <div class="machine-item">
                                <div class="machine-header">
                                    <span class="machine-name">VM-055 (ТЦ Next)</span>
                                    <span class="machine-status status-operational">Работает</span>
                                </div>
                                <div class="machine-details">
                                    <p>Адрес: ул. Шахрисабз, 5</p>
                                    <p>Последнее обслуживание: 15.07.2025</p>
                                    <p>Статус запасов: 85%</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="route-details-section">
                        <h3>Статистика маршрута</h3>
                        <div class="route-stats">
                            <div class="stats-item">
                                <div class="stats-label">Средняя выручка в день</div>
                                <div class="stats-value">25,000 сум</div>
                            </div>
                            <div class="stats-item">
                                <div class="stats-label">Продаж за неделю</div>
                                <div class="stats-value">350</div>
                            </div>
                            <div class="stats-item">
                                <div class="stats-label">Эффективность маршрута</div>
                                <div class="stats-value">85%</div>
                            </div>
                            <div class="stats-item">
                                <div class="stats-label">Время обслуживания</div>
                                <div class="stats-value">3.5 часа</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="btn btn-success"><i class="fas fa-edit"></i> Редактировать маршрут</button>
                        <button class="btn btn-warning"><i class="fas fa-user-plus"></i> Назначить оператора</button>
                        <button class="btn btn-danger"><i class="fas fa-trash"></i> Удалить маршрут</button>
                        <button class="btn"><i class="fas fa-print"></i> Печать маршрутного листа</button>
                    </div>
                </div>
                
                <!-- Map View (Hidden by default) -->
                <div class="map-container" id="map-view" style="display: none;">
                    <div class="map-controls">
                        <div class="map-layers">
                            <button class="map-layer-btn active" data-layer="standard">Стандартная</button>
                            <button class="map-layer-btn" data-layer="satellite">Спутник</button>
                            <button class="map-layer-btn" data-layer="traffic">Пробки</button>
                        </div>
                        <div class="map-options">
                            <button class="map-option-btn" data-option="optimize"><i class="fas fa-magic"></i> Оптимизировать</button>
                            <button class="map-option-btn" data-option="add-point"><i class="fas fa-plus"></i> Добавить точку</button>
                        </div>
                    </div>
                    
                    <div class="map-wrapper">
                        <div id="route-map" class="route-map">
                            <!-- Здесь будет карта -->
                            <div class="map-placeholder">
                                <img src="https://via.placeholder.com/800x500/e0e0e0/808080?text=Карта+маршрута" alt="Карта маршрута">
                                <div class="map-overlay">
                                    <div class="map-point" style="top: 30%; left: 20%;" title="VM-001 (ТЦ Mega Planet)">1</div>
                                    <div class="map-point" style="top: 40%; left: 35%;" title="VM-015 (БЦ Сити)">2</div>
                                    <div class="map-point" style="top: 50%; left: 50%;" title="VM-028 (Метро Олмазор)">3</div>
                                    <div class="map-point" style="top: 35%; left: 65%;" title="VM-042 (УзЭкспоЦентр)">4</div>
                                    <div class="map-point" style="top: 60%; left: 80%;" title="VM-055 (ТЦ Next)">5</div>
                                    <div class="map-route-line"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="map-info">
                        <div class="map-info-item">
                            <div class="info-label">Общая длина маршрута</div>
                            <div class="info-value">15.5 км</div>
                        </div>
                        <div class="map-info-item">
                            <div class="info-label">Расчетное время в пути</div>
                            <div class="info-value">45 мин</div>
                        </div>
                        <div class="map-info-item">
                            <div class="info-label">Расход топлива</div>
                            <div class="info-value">1.5 л</div>
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="btn btn-success"><i class="fas fa-save"></i> Сохранить маршрут</button>
                        <button class="btn"><i class="fas fa-share-alt"></i> Поделиться</button>
                        <button class="btn" id="view-details-btn"><i class="fas fa-info-circle"></i> Детали маршрута</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>&copy; 2024 VHM24 - Enterprise Vending Hub Manager | Powered by AI & Blockchain</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Переключение между деталями маршрута и картой
            const routeDetails = document.getElementById('route-details');
            const mapView = document.getElementById('map-view');
            const viewMapBtn = document.getElementById('view-map-btn');
            const viewDetailsBtn = document.getElementById('view-details-btn');
            
            viewMapBtn.addEventListener('click', () => {
                routeDetails.style.display = 'none';
                mapView.style.display = 'block';
            });
            
            viewDetailsBtn.addEventListener('click', () => {
                mapView.style.display = 'none';
                routeDetails.style.display = 'block';
            });
            
            // Обработчики фильтров
            const filterButtons = document.querySelectorAll('.filter-btn');
            const routeItems = document.querySelectorAll('.route-item');
            
            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const filter = button.getAttribute('data-filter');
                    
                    // Активируем кнопку
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    // Фильтруем маршруты
                    routeItems.forEach(item => {
                        if (filter === 'all' || item.getAttribute('data-status') === filter) {
                            item.style.display = 'block';
                        } else {
                            item.style.display = 'none';
                        }
                    });
                });
            });
            
            // Обработчики выбора маршрута
            routeItems.forEach(item => {
                item.addEventListener('click', () => {
                    // Активируем выбранный маршрут
                    routeItems.forEach(route => route.classList.remove('active'));
                    item.classList.add('active');
                    
                    // Обновляем детали маршрута
                    const routeId = item.getAttribute('data-id');
                    document.querySelector('.route-details-header h2').innerHTML = `<i class="fas fa-info-circle"></i> Детали маршрута #${routeId}`;
                    
                    // Переключаемся на детали маршрута, если открыта карта
                    if (mapView.style.display === 'block') {
                        mapView.style.display = 'none';
                        routeDetails.style.display = 'block';
                    }
                });
            });
            
            // Обработчик кнопки создания маршрута
            document.getElementById('create-route').addEventListener('click', () => {
                alert('Создание нового маршрута');
            });
            
            // Обработчик поиска
            document.getElementById('route-search').addEventListener('input', (e) => {
                const searchText = e.target.value.toLowerCase();
                
                routeItems.forEach(item => {
                    const routeTitle = item.querySelector('h4').textContent.toLowerCase();
                    const operatorName = item.querySelector('p').textContent.toLowerCase();
                    
                    if (routeTitle.includes(searchText) || operatorName.includes(searchText)) {
                        item.style.display = 'block';
                    } else {
                        item.style.display = 'none';
                    }
                });
            });
            
            // Обработчики слоев карты
            const mapLayerButtons = document.querySelectorAll('.map-layer-btn');
            
            mapLayerButtons.forEach(button => {
                button.addEventListener('click', () => {
                    mapLayerButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    const layer = button.getAttribute('data-layer');
                    alert(`Выбран слой карты: ${layer}`);
                });
            });
            
            // Обработчики опций карты
            const mapOptionButtons = document.querySelectorAll('.map-option-btn');
            
            mapOptionButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const option = button.getAttribute('data-option');
                    alert(`Выбрана опция карты: ${option}`);
                });
            });
            
            // Обработчики точек на карте
            const mapPoints = document.querySelectorAll('.map-point');
            
            mapPoints.forEach(point => {
                point.addEventListener('click', () => {
                    const title = point.getAttribute('title');
                    alert(`Выбрана точка: ${title}`);
                });
            });
            
            // Обработчики кнопок действий с маршрутом
            const actionButtons = document.querySelectorAll('.route-details .action-buttons .btn');
            
            actionButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const action = button.textContent.trim();
                    alert(`Действие: ${action}`);
                });
            });
        });
    </script>
</body>
</html>
