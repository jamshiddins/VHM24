# VHM24 Telegram Bot Service

Telegram Bot ะธะฝัะตััะตะนั ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะฒะตะฝะดะธะฝะณะพะฒัะผะธ ะผะฐัะธะฝะฐะผะธ ัะตัะตะท ะฟะปะฐััะพัะผั VHM24.

## ๐ ะะพะทะผะพะถะฝะพััะธ

- ๐ **ะััะตะฝัะธัะธะบะฐัะธั** - ะะตะทะพะฟะฐัะฝัะน ะฒัะพะด ัะตัะตะท username/password
- ๐ญ **ะฃะฟัะฐะฒะปะตะฝะธะต ะผะฐัะธะฝะฐะผะธ** - ะัะพัะผะพัั ัะพััะพัะฝะธั, ัะตะปะตะผะตััะธะธ, QR-ะบะพะดั
- ๐ฆ **ะฃะฟัะฐะฒะปะตะฝะธะต ะธะฝะฒะตะฝัะฐัะตะผ** - ะะพะฝััะพะปั ะพััะฐัะบะพะฒ, low stock ัะฒะตะดะพะผะปะตะฝะธั
- ๐ **ะกะธััะตะผะฐ ะทะฐะดะฐั** - ะกะพะทะดะฐะฝะธะต, ะฝะฐะทะฝะฐัะตะฝะธะต ะธ ะพััะปะตะถะธะฒะฐะฝะธะต ะทะฐะดะฐั
- ๐ **ะััะตัั** - ะะตะฝะตัะฐัะธั ะพััะตัะพะฒ ะฒ Excel/PDF ัะพัะผะฐัะฐั
- ๐ **ะฃะฒะตะดะพะผะปะตะฝะธั** - ะฃะผะฝัะต ะพะฟะพะฒะตัะตะฝะธั ะพ ะฒะฐะถะฝัั ัะพะฑััะธัั
- ๐ **ะัะปััะธัะทััะฝะพััั** - ะะพะดะดะตัะถะบะฐ EN/RU/UZ/KZ ัะทัะบะพะฒ
- ๐ฑ **QR-ะบะพะดั** - ะัััััะน ะดะพัััะฟ ะบ ะผะฐัะธะฝะฐะผ ะธ ะทะฐะดะฐัะฐะผ

## ๐ ะขัะตะฑะพะฒะฐะฝะธั

- Node.js 18+
- Telegram Bot Token (ะฟะพะปััะธัั ั [@BotFather](https://t.me/botfather))
- ะะพัััะฟ ะบ VHM24 API Gateway

## ๐๏ธ ะฃััะฐะฝะพะฒะบะฐ

1. ะฃััะฐะฝะพะฒะธัะต ะทะฐะฒะธัะธะผะพััะธ:
```bash
cd services/telegram-bot
npm install
```

2. ะะฐัััะพะนัะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั:
```bash
# ะกะบะพะฟะธััะนัะต .env.example ะฒ ะบะพัะตะฝั ะฟัะพะตะบัะฐ
cp ../../.env.example ../../.env

# ะััะตะดะฐะบัะธััะนัะต .env ะธ ะดะพะฑะฐะฒััะต:
TELEGRAM_BOT_TOKEN=your-bot-token-from-botfather
ADMIN_IDS=your-telegram-id,other-admin-id
API_URL=http://localhost:4000/api/v1
```

3. ะกะพะทะดะฐะนัะต ะดะธัะตะบัะพัะธั ะดะปั ะปะพะณะพะฒ:
```bash
mkdir -p logs
```

## ๐ ะะฐะฟััะบ

### Development ัะตะถะธะผ:
```bash
npm run dev
```

### Production ัะตะถะธะผ:
```bash
npm start
```

## ๐ค ะะพะผะฐะฝะดั ะฑะพัะฐ

- `/start` - ะะฐัะฐัั ัะฐะฑะพัั ะธ ะฐะฒัะพัะธะทะพะฒะฐัััั
- `/machines` - ะฃะฟัะฐะฒะปะตะฝะธะต ะฒะตะฝะดะธะฝะณะพะฒัะผะธ ะผะฐัะธะฝะฐะผะธ
- `/inventory` - ะฃะฟัะฐะฒะปะตะฝะธะต ะธะฝะฒะตะฝัะฐัะตะผ
- `/tasks` - ะัะพัะผะพัั ะธ ัะฟัะฐะฒะปะตะฝะธะต ะทะฐะดะฐัะฐะผะธ
- `/reports` - ะะตะฝะตัะฐัะธั ะพััะตัะพะฒ
- `/settings` - ะะฐัััะพะนะบะธ ะฑะพัะฐ
- `/help` - ะกะฟัะฐะฒะบะฐ ะฟะพ ะบะพะผะฐะฝะดะฐะผ

## ๐๏ธ ะััะธัะตะบัััะฐ

```
services/telegram-bot/
โโโ src/
โ   โโโ index.js              # ะขะพัะบะฐ ะฒัะพะดะฐ
โ   โโโ handlers/             # ะะฑัะฐะฑะพััะธะบะธ ะบะพะผะฐะฝะด
โ   โ   โโโ startHandler.js   # ะะฒัะพัะธะทะฐัะธั
โ   โ   โโโ machinesHandler.js # ะะฐัะธะฝั
โ   โ   โโโ inventoryHandler.js # ะะฝะฒะตะฝัะฐัั
โ   โ   โโโ tasksHandler.js   # ะะฐะดะฐัะธ
โ   โ   โโโ reportsHandler.js # ะััะตัั
โ   โ   โโโ settingsHandler.js # ะะฐัััะพะนะบะธ
โ   โ   โโโ callbackHandler.js # Callback queries
โ   โโโ utils/                # ะฃัะธะปะธัั
โ   โ   โโโ auth.js           # ะะฒัะพัะธะทะฐัะธั
โ   โ   โโโ errorHandler.js   # ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ
โ   โ   โโโ formatters.js     # ะคะพัะผะฐัะธัะพะฒะฐะฝะธะต ะดะฐะฝะฝัั
โ   โ   โโโ pagination.js     # ะะฐะณะธะฝะฐัะธั
โ   โ   โโโ qrGenerator.js    # ะะตะฝะตัะฐัะธั QR
โ   โ   โโโ reportGenerator.js # ะะตะฝะตัะฐัะธั ะพััะตัะพะฒ
โ   โโโ keyboards/            # ะะปะฐะฒะธะฐัััั (ะฑัะดััะตะต)
โโโ logs/                     # ะะพะณะธ
โโโ package.json
โโโ README.md
```

## ๐ง ะะพะฝัะธะณััะฐัะธั

### ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั:

- `TELEGRAM_BOT_TOKEN` - ะขะพะบะตะฝ ะฑะพัะฐ ะพั BotFather
- `ADMIN_IDS` - Telegram ID ะฐะดะผะธะฝะธัััะฐัะพัะพะฒ (ัะตัะตะท ะทะฐะฟัััั)
- `API_URL` - URL API Gateway (default: http://localhost:4000/api/v1)
- `NODE_ENV` - ะะบััะถะตะฝะธะต (development/production)

### ะะพะปััะตะฝะธะต Telegram ID:

1. ะัะฟัะฐะฒััะต ะปัะฑะพะต ัะพะพะฑัะตะฝะธะต ะฑะพัั [@userinfobot](https://t.me/userinfobot)
2. ะะพั ะพัะฒะตัะธั ะฒะฐัะธะผ ID
3. ะะพะฑะฐะฒััะต ID ะฒ ADMIN_IDS

## ๐ธ ะกะบัะธะฝัะพัั

### ะะปะฐะฒะฝะพะต ะผะตะฝั
```
๐ Main Menu

Choose an option from the menu below:
[๐ญ Machines] [๐ฆ Inventory]
[๐ Tasks] [๐ Reports]
[โ๏ธ Settings] [โ Help]
[๐ช Logout]
```

### ะกะฟะธัะพะบ ะผะฐัะธะฝ
```
๐ญ Vending Machines

1. Coffee Machine A1
   ๐ Building A, Floor 1
   ๐ง Status: โ Active
   ๐ ID: `cm_a1_001`

2. Snack Machine B2
   ๐ Building B, Floor 2
   ๐ง Status: ๐ง Maintenance
   ๐ ID: `sm_b2_001`

Total machines: 15
```

## ๐ ะะตะทะพะฟะฐัะฝะพััั

- ะะฐัะพะปะธ ัะดะฐะปััััั ะธะท ัะฐัะฐ ััะฐะทั ะฟะพัะปะต ะฒะฒะพะดะฐ
- JWT ัะพะบะตะฝั ััะฐะฝัััั ะฒ ะฟะฐะผััะธ
- ะะพะดะดะตัะถะบะฐ 2FA (ะฒ ัะฐะทัะฐะฑะพัะบะต)
- ะะพะปะตะฒะฐั ะผะพะดะตะปั ะดะพัััะฟะฐ

## ๐ ะัะปะฐะดะบะฐ

### ะะบะปััะธัั debug ะปะพะณะธ:
```bash
export DEBUG=telegram-bot:*
npm run dev
```

### ะัะพัะผะพัั ะปะพะณะพะฒ:
```bash
# ะัะต ะปะพะณะธ
tail -f logs/combined.log

# ะขะพะปัะบะพ ะพัะธะฑะบะธ
tail -f logs/error.log
```

## ๐ง ะ ัะฐะทัะฐะฑะพัะบะต

- [ ] Inline ัะตะถะธะผ ะดะปั ะฑััััะพะณะพ ะฟะพะธัะบะฐ
- [ ] ะะพะปะพัะพะฒัะต ะบะพะผะฐะฝะดั
- [ ] ะะฝัะตะณัะฐัะธั ั ะฟะปะฐัะตะถะฝัะผะธ ัะธััะตะผะฐะผะธ
- [ ] Push ัะฒะตะดะพะผะปะตะฝะธั
- [ ] ะะตะฑ-ะธะฝัะตััะตะนั ะดะปั ะฝะฐัััะพะนะบะธ
- [ ] ะะฒัะพะผะฐัะธัะตัะบะธะต ะฑัะบะฐะฟั

## ๐ ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

### ะัััััะน ะดะพัััะฟ ะบ ะผะฐัะธะฝะต:
1. ะัะฟัะฐะฒััะต ัะพัะพ QR-ะบะพะดะฐ ะผะฐัะธะฝั
2. ะะพั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะพัะบัะพะตั ะธะฝัะพัะผะฐัะธั ะพ ะผะฐัะธะฝะต

### ะะพะธัะบ ะฑะปะธะถะฐะนัะธั ะผะฐัะธะฝ:
1. ะัะฟัะฐะฒััะต ัะฒะพั ะณะตะพะปะพะบะฐัะธั
2. ะะพั ะฟะพะบะฐะถะตั 5 ะฑะปะธะถะฐะนัะธั ะผะฐัะธะฝ ั ัะฐัััะพัะฝะธะตะผ

### ะญะบัะฟะพัั ะพััะตัะฐ:
1. `/reports` โ ะัะฑะตัะธัะต ัะธะฟ ะพััะตัะฐ
2. ะัะฑะตัะธัะต ะฟะตัะธะพะด
3. ะัะฑะตัะธัะต ัะพัะผะฐั (Excel/PDF)
4. ะะพะปััะธัะต ัะฐะนะป

## ๐ค ะะพะดะดะตัะถะบะฐ

- Telegram: @vhm24_support
- Email: support@vhm24.com
- ะะพะบัะผะตะฝัะฐัะธั: https://docs.vhm24.com

## ๐ ะะธัะตะฝะทะธั

Proprietary - VHM24 Platform
