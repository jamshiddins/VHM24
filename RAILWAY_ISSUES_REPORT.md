# üö® –û—Ç—á–µ—Ç –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å Railway –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

‚úÖ **–ü—Ä–æ–µ–∫—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ** - –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `npm start` ‚ùå **–ü—Ä–æ–µ–∫—Ç –Ω–µ
–¥–µ–ø–ª–æ–∏—Ç—Å—è –Ω–∞ Railway** - –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

## –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞ –≤ nixpacks.toml

- **–ü—Ä–æ–±–ª–µ–º–∞**: –í `nixpacks.toml` –±—ã–ª —É–∫–∞–∑–∞–Ω –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª `railway-start.js`
- **–†–µ—à–µ–Ω–∏–µ**: –ò–∑–º–µ–Ω–µ–Ω –Ω–∞ `start.js`

### 2. ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç railway.json

- **–ü—Ä–æ–±–ª–µ–º–∞**: –í –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è `railway.json`, –Ω–æ —Ñ–∞–π–ª –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- **–†–µ—à–µ–Ω–∏–µ**: –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Railway

### 3. ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- **–ü—Ä–æ–±–ª–µ–º–∞**: Railway —Ç—Ä–µ–±—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ Railway Dashboard

### 4. ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã —Å Prisma –≤ production

- **–ü—Ä–æ–±–ª–µ–º–∞**: Prisma —Ç—Ä–µ–±—É–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
- **–†–µ—à–µ–Ω–∏–µ**: –í `nixpacks.toml` —É–∂–µ –µ—Å—Ç—å –∫–æ–º–∞–Ω–¥–∞ `npm run db:generate`

## –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

### 1. –°–æ–∑–¥–∞—Ç—å railway.json

```json
{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "NIXPACKS"
  },
  "deploy": {
    "numReplicas": 1,
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10
  }
}
```

### 2. –û–±–Ω–æ–≤–∏—Ç—å nixpacks.toml –¥–ª—è –ª—É—á—à–µ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

```toml
[phases.setup]
nixPkgs = ["nodejs-18_x", "npm-9_x"]

[phases.install]
cmds = [
  "npm ci --workspaces --if-present",
  "npm install"
]

[phases.build]
cmds = [
  "cd packages/database && npx prisma generate",
  "npm run build --workspaces --if-present"
]

[start]
cmd = "node start.js"
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Railway

–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

- `DATABASE_URL` - –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç Railway PostgreSQL
- `JWT_SECRET` - —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∫–ª—é—á
- `PORT` - Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç
- `RAILWAY_ENVIRONMENT` - Railway —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:

- `REDIS_URL` - –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Redis
- `TELEGRAM_BOT_TOKEN` - –¥–ª—è Telegram –±–æ—Ç–∞
- `ADMIN_IDS` - ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –¥–µ–ø–ª–æ—è –≤ Railway

```bash
railway logs -d
```

### 5. –£–±–µ–¥–∏—Ç—å—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ø—Ä–æ–µ–∫—Ç–∞

Railway –æ–∂–∏–¥–∞–µ—Ç:

- `package.json` –≤ –∫–æ—Ä–Ω–µ ‚úÖ
- –°–∫—Ä–∏–ø—Ç `start` –≤ package.json ‚úÖ
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º ‚úÖ

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ - —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç—Å—è, –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞ –¥–ª—è Railway:

```javascript
// railway-start.js
if (process.env.RAILWAY_ENVIRONMENT) {
  // –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ Gateway –≤ Railway
  process.env.PORT = process.env.PORT || 8000;
  require('./services/gateway/src/index.js');
} else {
  // –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
  require('./start.js');
}
```

–ò –æ–±–Ω–æ–≤–∏—Ç—å nixpacks.toml:

```toml
[start]
cmd = "node railway-start.js"
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

1. –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ Git
2. –ó–∞–ø—É—à–∏—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω–µ—Ç –Ω–æ–≤—ã–π –¥–µ–ø–ª–æ–π
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `railway logs`
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å: `railway status`

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏

- Railway Discord: https://discord.gg/railway
- Railway Status: https://railway.app/status
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://docs.railway.app
