# üìä –ò—Ç–æ–≥–∏ –¥–µ–ø–ª–æ—è VHM24 –Ω–∞ Railway

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å (09.01.2025)

### ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **API Gateway —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –∏ –¥–æ—Å—Ç—É–ø–µ–Ω**
   - URL: https://vhm24-production.up.railway.app
   - Health endpoint: https://vhm24-production.up.railway.app/health
   - Gateway –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã

2. **–í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã**
   - DATABASE_URL ‚úÖ
   - JWT_SECRET ‚úÖ
   - TELEGRAM_BOT_TOKEN ‚úÖ
   - –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ‚úÖ

3. **–ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è Railway**
   - –°–æ–∑–¥–∞–Ω `railway-start.js` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
   - –û–±–Ω–æ–≤–ª–µ–Ω `package.json`
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `nixpacks.toml`
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Gateway

4. **Telegram –±–æ—Ç –∑–∞–ø—É—â–µ–Ω**
   - –ë–æ—Ç –∞–∫—Ç–∏–≤–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ
   - Token: 8015112367:AAHi25gHhI3p1X1uyuCAt8vUnlMZRrcoKEQ

### ‚ùå –ü—Ä–æ–±–ª–µ–º—ã, —Ç—Ä–µ–±—É—é—â–∏–µ —Ä–µ—à–µ–Ω–∏—è:

1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Supabase –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è**
   - –û—à–∏–±–∫–∞: `Can't reach database server at db.pgghdmepazenwkrmagvy.supabase.co:5432`
   - –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
     - Supabase –ø—Ä–æ–µ–∫—Ç –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω)
     - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å –≤ DATABASE_URL
     - –°–µ—Ç–µ–≤—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Railway

2. **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ Gateway**
   - Gateway –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ IPv6 (::1)
   - –°–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã, –Ω–æ proxy –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Supabase (–ö–†–ò–¢–ò–ß–ù–û!)

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ Supabase
# URL: https://app.supabase.com/project/pgghdmepazenwkrmagvy

# –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω - –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –µ–≥–æ
# –ï—Å–ª–∏ –ø–∞—Ä–æ–ª—å –∏–∑–º–µ–Ω–∏–ª—Å—è - –æ–±–Ω–æ–≤–∏—Ç–µ DATABASE_URL –≤ Railway
```

### 2. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –ë–î

–ï—Å–ª–∏ Supabase –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Railway PostgreSQL:

```bash
# –í Railway Dashboard:
1. Add Service ‚Üí Database ‚Üí PostgreSQL
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ DATABASE_URL –∏–∑ —Å–æ–∑–¥–∞–Ω–Ω–æ–π –ë–î
3. –û–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é DATABASE_URL –≤ –≤–∞—à–µ–º —Å–µ—Ä–≤–∏—Å–µ
```

### 3. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å IPv6

–î–æ–±–∞–≤—å—Ç–µ —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Railway:

```env
AUTH_SERVICE_URL=http://127.0.0.1:3001
MACHINES_SERVICE_URL=http://127.0.0.1:3002
INVENTORY_SERVICE_URL=http://127.0.0.1:3003
TASKS_SERVICE_URL=http://127.0.0.1:3004
BUNKERS_SERVICE_URL=http://127.0.0.1:3005
```

## üìã –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
node test-railway-api.js

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
railway logs

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
railway restart

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
railway variables
```

## üéØ –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞:

- **Gateway**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**: ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- **–ö–æ–¥**: ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: ‚ùå –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã**: ‚ö†Ô∏è –ó–∞–ø—É—â–µ–Ω—ã, –Ω–æ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã

**–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞** - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö Supabase. –ü–æ—Å–ª–µ —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã —Å–∏—Å—Ç–µ–º–∞
–¥–æ–ª–∂–Ω–∞ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é.

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **–°—Ä–æ—á–Ω–æ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Supabase –ø—Ä–æ–µ–∫—Ç
2. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Railway PostgreSQL
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã

---

**–°—Ç–∞—Ç—É—Å –¥–µ–ø–ª–æ—è**: –ß–∞—Å—Ç–∏—á–Ω–æ —É—Å–ø–µ—à–µ–Ω. –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å –ë–î –¥–ª—è –ø–æ–ª–Ω–æ–π —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.
