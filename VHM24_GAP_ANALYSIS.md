# üìä –ê–Ω–∞–ª–∏–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è VHM24 —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –≤–µ–Ω–¥–∏–Ω–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

## üîç –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑

### 1. –í–µ–Ω–¥–∏–Ω–≥–æ–≤—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã ‚úÖ/‚ùå

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- model ‚úÖ (–µ—Å—Ç—å –≤ Machine)
- serial_number ‚úÖ (serialNumber –≤ Machine)
- vendhub_code ‚ùå (–Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–æ–¥)
- location ‚úÖ (–µ—Å—Ç—å location –∏ coordinates)
- status ‚úÖ (–µ—Å—Ç—å, –Ω–æ –Ω—É–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å—ã)
- group ‚ùå (–Ω–µ—Ç –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ —Ä–∞–π–æ–Ω–∞–º)
- installation_date ‚ùå (–Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å)
- assigned_operator_id ‚ùå (–Ω–µ—Ç –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –æ–ø–µ—Ä–∞—Ç–æ—Ä—É)

**–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏:**
```javascript
// –î–æ–±–∞–≤–∏—Ç—å –≤ Machine –º–æ–¥–µ–ª—å:
vendHubCode: String // VM-015-TASH-WEST
groupId: String // —Ä–∞–π–æ–Ω/–≥—Ä—É–ø–ø–∞
installationDate: Date
assignedOperatorId: String // ID –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
```

### 2. –ë—É–Ω–∫–µ—Ä—ã ‚ùå (–û–¢–°–£–¢–°–¢–í–£–ï–¢)

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–æ–¥–µ–ª—å:**
```javascript
// Bunker model
{
  code: String, // SET-005-4SU
  setNumber: String, // SET-005
  position: Number, // 4
  ingredientCode: String, // SU
  ingredientType: Enum, // 8 —Ç–∏–ø–æ–≤
  emptyWeight: Number,
  fillWeight: Number,
  returnWeight: Number,
  status: Enum, // –Ω–∞ —Å–∫–ª–∞–¥–µ/–≤ –º–∞—à–∏–Ω–µ/–≤ –ø—É—Ç–∏/–Ω–∞ –º–æ–π–∫–µ/–ø–æ–≤—Ä–µ–∂–¥—ë–Ω
  currentMachineId: String,
  history: [{
    action: String, // –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ/—É—Å—Ç–∞–Ω–æ–≤–∫–∞/–≤–æ–∑–≤—Ä–∞—Ç
    timestamp: Date,
    performedBy: String,
    weight: Number,
    location: String
  }]
}
```

### 3. –°–∏—Ä–æ–ø—ã ‚úÖ/‚ùå

**–¢–µ–∫—É—â–µ–µ:** –ß–∞—Å—Ç–∏—á–Ω–æ –µ—Å—Ç—å –≤ Inventory
**–ù–µ–æ–±—Ö–æ–¥–∏–º–æ:**
- –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é –¥–ª—è —Å–∏—Ä–æ–ø–æ–≤
- –î–æ–±–∞–≤–∏—Ç—å volume_liters –≤–º–µ—Å—Ç–æ quantity
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–≤—è–∑–∫—É –∫ –º–∞—à–∏–Ω–µ
- –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å (–ø–æ–ª–Ω—ã–π/—á–∞—Å—Ç–∏—á–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω/–ø—É—Å—Ç–æ–π)

### 4. –í–æ–¥–∞ ‚ùå (–û–¢–°–£–¢–°–¢–í–£–ï–¢)

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å:**
```javascript
// WaterBottle model
{
  bottleId: String,
  volumeLiters: 18.9,
  arrivalDate: Date,
  machineId: String,
  status: Enum, // full/empty/in_use
  returnedEmpty: Boolean,
  operatorId: String
}
```

### 5. –ó–∞–ø–∞—Å–Ω—ã–µ —á–∞—Å—Ç–∏ ‚úÖ/‚ùå

**–¢–µ–∫—É—â–µ–µ:** –ß–∞—Å—Ç–∏—á–Ω–æ –µ—Å—Ç—å –≤ Inventory
**–ù–µ–æ–±—Ö–æ–¥–∏–º–æ:**
- –î–æ–±–∞–≤–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥ SP-2024-DC24-5V-001
- –î–æ–±–∞–≤–∏—Ç—å compatible_with –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- –î–æ–±–∞–≤–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –º–∞—à–∏–Ω–∞—Ö

### 6. –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã ‚ùå (–û–¢–°–£–¢–°–¢–í–£–ï–¢)

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª–∏:**
```javascript
// Supplier model
{
  name: String,
  inn: String,
  contactPerson: String,
  currency: String,
  paymentTerms: String,
  contracts: [Contract]
}

// Contract model
{
  contractNumber: String,
  supplierId: String,
  signedDate: Date,
  expirationDate: Date,
  items: [{
    itemId: String,
    quantity: Number,
    price: Number
  }],
  paymentConditions: String
}
```

### 7. –£—á–µ—Ç –ø–∞—Ä—Ç–∏–π —Ç–æ–≤–∞—Ä–æ–≤ ‚ùå (–û–¢–°–£–¢–°–¢–í–£–ï–¢)

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å:**
```javascript
// Batch model
{
  code: String, // PARTY-2024-CHOC-03
  type: String,
  ingredientOrItem: String,
  quantity: Number,
  expirationDate: Date,
  usedIn: [{
    machineId: String,
    date: Date,
    quantity: Number
  }],
  remaining: Number,
  status: String
}
```

### 8. –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —É—á–µ—Ç ‚ùå (–û–¢–°–£–¢–°–¢–í–£–ï–¢)

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å Financial:**
```javascript
// Income model
{
  source: Enum, // QR/cash/VIP/rent
  amount: Decimal,
  machineId: String,
  timestamp: Date,
  paymentGateway: String
}

// Expense model
{
  category: Enum, // ingredients/rent/repair/etc
  amount: Decimal,
  recipient: String,
  paymentType: Enum, // cash/invoice/bank
  invoiceNumber: String,
  linkedSupplier: String,
  linkedContract: String
}
```

### 9. –†–µ—Ü–µ–ø—Ç—ã –∏ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å ‚ùå (–û–¢–°–£–¢–°–¢–í–£–ï–¢)

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å:**
```javascript
// Recipe model
{
  name: String,
  version: String,
  ingredients: [{
    ingredientId: String,
    gramms: Number
  }],
  syrups: [{
    syrupId: String,
    ml: Number
  }],
  waterVolume: Number,
  costPerUnit: Decimal, // —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
  history: [Version]
}
```

### 10. –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ ‚úÖ/‚ùå

**–¢–µ–∫—É—â–µ–µ:** –ï—Å—Ç—å AuditLog
**–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å:**
- –î–æ–±–∞–≤–∏—Ç—å performed_at (—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è)
- –î–æ–±–∞–≤–∏—Ç—å entered_at (–≤—Ä–µ–º—è –∑–∞–ø–∏—Å–∏)
- –î–æ–±–∞–≤–∏—Ç—å method (—Ä—É—á–Ω–æ–π/telegram/–∞–≤—Ç–æ–∏–º–ø–æ—Ä—Ç)
- –î–æ–±–∞–≤–∏—Ç—å media[] –¥–ª—è —Ñ–æ—Ç–æ

### 11. Telegram –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ‚úÖ/‚ùå

**–¢–µ–∫—É—â–µ–µ:** –ë–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–æ–∑–¥–∞–Ω
**–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å:**
- FSM –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å (—Å–∫–ª–∞–¥/–æ–ø–µ—Ä–∞—Ç–æ—Ä/–º–µ–Ω–µ–¥–∂–µ—Ä/–∞–¥–º–∏–Ω)
- –í–∑–≤–µ—à–∏–≤–∞–Ω–∏–µ –±—É–Ω–∫–µ—Ä–æ–≤
- –§–æ—Ç–æ—Ñ–∏–∫—Å–∞—Ü–∏—è
- –ì–µ–æ–º–µ—Ç–∫–∏
- –í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö –∑–∞–¥–Ω–∏–º —á–∏—Å–ª–æ–º

## üìã –ü–ª–∞–Ω –¥–æ—Ä–∞–±–æ—Ç–∫–∏ VHM24

### –§–∞–∑–∞ 1: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –¥–∞–Ω–Ω—ã—Ö (1 –Ω–µ–¥–µ–ª—è)
1. –î–æ—Ä–∞–±–æ—Ç–∞—Ç—å Machine –º–æ–¥–µ–ª—å
2. –°–æ–∑–¥–∞—Ç—å Bunker –º–æ–¥–µ–ª—å –∏ —Å–µ—Ä–≤–∏—Å
3. –°–æ–∑–¥–∞—Ç—å WaterBottle –º–æ–¥–µ–ª—å
4. –†–∞—Å—à–∏—Ä–∏—Ç—å Inventory –¥–ª—è —Å–∏—Ä–æ–ø–æ–≤ –∏ –∑–∞–ø—á–∞—Å—Ç–µ–π

### –§–∞–∑–∞ 2: –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –º–æ–¥—É–ª—å (1 –Ω–µ–¥–µ–ª—è)
1. –°–æ–∑–¥–∞—Ç—å Financial —Å–µ—Ä–≤–∏—Å
2. –ú–æ–¥–µ–ª–∏ Income –∏ Expense
3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
4. –û—Ç—á–µ—Ç–Ω–æ—Å—Ç—å

### –§–∞–∑–∞ 3: –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ –∏ –ø–∞—Ä—Ç–∏–∏ (5 –¥–Ω–µ–π)
1. –°–æ–∑–¥–∞—Ç—å Supplier —Å–µ—Ä–≤–∏—Å
2. –ú–æ–¥–µ–ª–∏ Supplier, Contract, Batch
3. Tracking –ø–∞—Ä—Ç–∏–π —Ç–æ–≤–∞—Ä–æ–≤

### –§–∞–∑–∞ 4: –†–µ—Ü–µ–ø—Ç—ã –∏ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å (3 –¥–Ω—è)
1. –°–æ–∑–¥–∞—Ç—å Recipe —Å–µ—Ä–≤–∏—Å
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏
3. –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–æ–≤

### –§–∞–∑–∞ 5: –î–æ—Ä–∞–±–æ—Ç–∫–∞ Telegram Bot (1 –Ω–µ–¥–µ–ª—è)
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å FSM –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
2. –î–æ–±–∞–≤–∏—Ç—å —Ä–æ–ª–µ–≤—É—é –º–æ–¥–µ–ª—å
3. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–∑–≤–µ—à–∏–≤–∞–Ω–∏—è
4. –§–æ—Ç–æ—Ñ–∏–∫—Å–∞—Ü–∏—è —á–µ—Ä–µ–∑ MinIO
5. –í–≤–æ–¥ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

## üîß –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏

### 1. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å Bunkers:
```bash
services/bunkers/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ index.js
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îî‚îÄ‚îÄ services/
```

### 2. –°–æ–∑–¥–∞—Ç—å Financial —Å–µ—Ä–≤–∏—Å:
```bash
services/financial/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ index.js
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îî‚îÄ‚îÄ reports/
```

### 3. –†–∞—Å—à–∏—Ä–∏—Ç—å Telegram Bot:
- –î–æ–±–∞–≤–∏—Ç—å handlers/bunkerHandler.js
- –î–æ–±–∞–≤–∏—Ç—å handlers/financialHandler.js
- –î–æ–±–∞–≤–∏—Ç—å utils/fsm.js –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏–π
- –î–æ–±–∞–≤–∏—Ç—å utils/photoUploader.js

## üìä –ú–∞—Ç—Ä–∏—Ü–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è

| –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª | VHM24 | –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è | –°—Ç–∞—Ç—É—Å |
|------------|-------|------------|--------|
| –í–µ–Ω–¥–∏–Ω–≥–æ–≤—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã | ‚úÖ | ‚úÖ‚úÖ‚úÖ | 60% |
| –ë—É–Ω–∫–µ—Ä—ã | ‚ùå | ‚úÖ‚úÖ‚úÖ | 0% |
| –°–∏—Ä–æ–ø—ã | ‚úÖ | ‚úÖ‚úÖ‚úÖ | 40% |
| –í–æ–¥–∞ | ‚ùå | ‚úÖ‚úÖ‚úÖ | 0% |
| –ó–∞–ø—á–∞—Å—Ç–∏ | ‚úÖ | ‚úÖ‚úÖ‚úÖ | 50% |
| –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ | ‚ùå | ‚úÖ‚úÖ‚úÖ | 0% |
| –ü–∞—Ä—Ç–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤ | ‚ùå | ‚úÖ‚úÖ‚úÖ | 0% |
| –§–∏–Ω–∞–Ω—Å—ã | ‚ùå | ‚úÖ‚úÖ‚úÖ | 0% |
| –†–µ—Ü–µ–ø—Ç—ã | ‚ùå | ‚úÖ‚úÖ‚úÖ | 0% |
| –ò—Å—Ç–æ—Ä–∏—è | ‚úÖ | ‚úÖ‚úÖ‚úÖ | 70% |
| Telegram | ‚úÖ | ‚úÖ‚úÖ‚úÖ | 50% |

**–û–±—â–µ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ: ~35%**

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1:** –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª–∏ –¥–ª—è –±—É–Ω–∫–µ—Ä–æ–≤ –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤
2. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2:** –î–æ—Ä–∞–±–æ—Ç–∞—Ç—å Telegram Bot –ø–æ–¥ —Å–ø–µ—Ü–∏—Ñ–∏–∫—É
3. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –∏ –ø–∞—Ä—Ç–∏–∏
4. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4:** –î–æ–±–∞–≤–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç—ã –∏ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å

–î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–∫–æ–ª–æ 4-5 –Ω–µ–¥–µ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
