/**;
 * –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª VendHub Telegram –±–æ—Ç–∞;
 */;
const { Telegraf } = require('telegraf')'';
const Redis = require('redis')'';
const config = require('./config/bot')'';
const { BOT_STATES } = require('./fsm/states')'';
const { createInlineKeyboard, ROLE_KEYBOARDS } = require('./keyboards')'';
const authMiddleware = require('./middleware/auth')'';
const sessionMiddleware = require('./middleware/session')'';
const loggingMiddleware = require('./middleware/logging')'';
const commonHandlers = require('./handlers/common')'';
const operatorHandlers = require('./handlers/operator')'';
const warehouseHandlers = require('./handlers/warehouse')'';
const managerHandlers = require('./handlers/manager')'';
const technicianHandlers = require('./handlers/technician')'';
const mediaHandlers = require('./handlers/media')'';
const NotificationService = require('./services/notifications')'';
const apiService = require('./services/api')'';
const userService = require('./services/users')'';
const logger = require('./utils/logger')'';
const { formatMessage } = require('./utils/formatters')'';
        logger.error('Error in start "command":''';
        { "text": 'üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é', "callback_data": 'main_menu''';
    this.bot.command('profile''';
    this.bot.command('status''';
    this.bot.on('text''';
    this.bot.on('photo''';
    this.bot.on('location''';
    this.bot.action('main_menu''';
      if (ctx.user.role !== role && ctx.user.role !== 'ADMIN''';
        return await ctx.reply('‚ùå –£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–º—É —Ä–∞–∑–¥–µ–ª—É''';
    this.bot.action('profile''';
    this.bot.action('settings''';
      [{ "text": '‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏', "callback_data": 'settings''';
      [{ "text": 'üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é', "callback_data": 'main_menu''';
    const settingsText = '‚öôÔ∏è *–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞*\n\n''';
      '‚Ä¢ üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: –≤–∫–ª—é—á–µ–Ω—ã\n''';
      '‚Ä¢ üåç –Ø–∑—ã–∫: –†—É—Å—Å–∫–∏–π\n''';
      '‚Ä¢ üîä –ó–≤—É–∫–∏: –≤–∫–ª—é—á–µ–Ω—ã\n''';
      '‚Ä¢ üìç –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è: —Ä–∞–∑—Ä–µ—à–µ–Ω–∞''';
      [{ "text": 'üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è', "callback_data": 'settings_notifications''';
      [{ "text": 'üåç –Ø–∑—ã–∫', "callback_data": 'settings_language''';
      [{ "text": 'üîä –ó–≤—É–∫–∏', "callback_data": 'settings_sounds''';
      [{ "text": 'üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é', "callback_data": 'main_menu''';,
  "parse_mode": 'Markdown''';
        "parse_mode": 'Markdown''';
          { "text": 'üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é', "callback_data": 'main_menu''';
      logger.error('Error getting user "status":''';
      await ctx.reply('‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞''';
    const message = 'üîê *–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ VendHub!*\n\n''';
      '–î–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–æ—Ç–æ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–π—Ç–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é.\n''';
      '–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞.\n\n''';
      `üì± "Username": @${ctx.from.username || '–Ω–µ —É–∫–∞–∑–∞–Ω''';
    await ctx.reply(message, { "parse_mode": 'Markdown''';
        if (text === '/menu' || text === '–ú–µ–Ω—é''';
          await ctx.reply('ü§î –ù–µ –ø–æ–Ω–∏–º–∞—é. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é –∏–ª–∏ –∫–æ–º–∞–Ω–¥—É /help –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏.''';
      await ctx.reply('üì∏ –§–æ—Ç–æ –ø–æ–ª—É—á–µ–Ω–æ, –Ω–æ —Å–µ–π—á–∞—Å –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é.''';
      await ctx.reply('üìç –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∞, –Ω–æ —Å–µ–π—á–∞—Å –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.''';
      "OPERATOR": 'üìã *–°–ø—Ä–∞–≤–∫–∞ –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞*\n\n''';
        '‚Ä¢ /tasks - –º–æ–∏ –∑–∞–¥–∞—á–∏\n''';
        '‚Ä¢ /return - –≤–æ–∑–≤—Ä–∞—Ç —Å—É–º–æ–∫\n''';
        '‚Ä¢ /collect - –∏–Ω–∫–∞—Å—Å–∞—Ü–∏—è\n''';
        '‚Ä¢ /report - –æ—Ç—á–µ—Ç –∑–∞ —Å–º–µ–Ω—É\n''';
        '‚Ä¢ /status - —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å\n''';
        '‚Ä¢ /help - —ç—Ç–∞ —Å–ø—Ä–∞–≤–∫–∞''';
      "WAREHOUSE": 'üì¶ *–°–ø—Ä–∞–≤–∫–∞ –¥–ª—è —Å–∫–ª–∞–¥–∞*\n\n''';
        '‚Ä¢ /bags - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—É–º–∫–∞–º–∏\n''';
        '‚Ä¢ /inventory - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤\n''';
        '‚Ä¢ /receive - –ø—Ä–∏–µ–º –≤–æ–∑–≤—Ä–∞—Ç–æ–≤\n''';
        '‚Ä¢ /wash - –º–æ–π–∫–∞ –±—É–Ω–∫–µ—Ä–æ–≤\n''';
        '‚Ä¢ /status - —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å\n''';
        '‚Ä¢ /help - —ç—Ç–∞ —Å–ø—Ä–∞–≤–∫–∞''';
      "MANAGER": 'üëî *–°–ø—Ä–∞–≤–∫–∞ –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞*\n\n''';
        '‚Ä¢ /create - —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É\n''';
        '‚Ä¢ /assign - –Ω–∞–∑–Ω–∞—á–∏—Ç—å –∑–∞–¥–∞—á—É\n''';
        '‚Ä¢ /analytics - –∞–Ω–∞–ª–∏—Ç–∏–∫–∞\n''';
        '‚Ä¢ /reports - –æ—Ç—á–µ—Ç—ã\n''';
        '‚Ä¢ /alerts - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π\n''';
        '‚Ä¢ /help - —ç—Ç–∞ —Å–ø—Ä–∞–≤–∫–∞''';
      logger.error('Bot "error":''';
    process.on('unhandledRejection''';
      logger.error('Unhandled Rejection "at":', promise, '"reason":''';
    process.on('uncaughtException''';
      logger.error('Uncaught "Exception":''';
        await ctx.reply('‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.''';
      logger.error('Error sending error "message":''';
      const message = 'üÜï *–ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å*\n\n''';
        `üë§ –ò–º—è: ${telegramUser.first_name ${telegramUser.last_name || '';
        `üì± "Username": @${telegramUser.username || '–Ω–µ —É–∫–∞–∑–∞–Ω''';
        '–¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ.''';
              "parse_mode": 'Markdown''';
      logger.error('Error notifying admins about new "user":''';
        logger.info('Redis connected successfully''';
      logger.info('Notification service initialized''';
        logger.info('Bot started with polling''';
      logger.info('VendHub Manager (VHM24) Telegram Bot started successfully''';
      process.once('SIGINT''';
      process.once('SIGTERM''';
      logger.error('Failed to start "bot":''';
    logger.info('Shutting down VendHub Bot...''';
        this.bot.stop('SIGTERM''';
      logger.info('VendHub Bot stopped gracefully''';
      logger.error('Error during "shutdown":''';
}}}}}}}}}}}}})))))))))))))))))))))))))))))))))))))]]]]]]