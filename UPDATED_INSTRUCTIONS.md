# Обновленные инструкции по запуску VHM24

## Исправленные проблемы

### 1. Проблема с файлом .env
Исправлена проблема с некорректными шаблонами в файле .env, которые вызывали ошибку:
```
failed to read D:\Projects\VHM24\.env: Invalid template: "${process.env.URL_85}"
```

### 2. Проблемы с зависимостями
Исправлены проблемы с несовместимыми зависимостями:
- fast-jwt заменен на jsonwebtoken
- canvas заменен на skia-canvas

### 3. Проблемы с Node.js 22.17.0
Создана Docker-конфигурация с Node.js 18, которая полностью совместима со всеми зависимостями проекта.

## Обновленные скрипты запуска

Созданы новые скрипты, которые автоматически исправляют файл .env перед запуском:

### Для PowerShell (Windows)

```powershell
# Запуск всех исправлений и запуск в Docker
./run-all-fixes-updated.ps1

# Только запуск в Docker
./run-docker-updated.ps1
```

### Для Bash (Linux/macOS)

```bash
# Запуск всех исправлений и запуск в Docker
./run-all-fixes-updated.sh

# Только запуск в Docker
./run-docker-updated.sh
```

### Для CMD (Windows)

```cmd
# Запуск всех исправлений и запуск в Docker
run-all-fixes-updated.bat

# Только запуск в Docker
run-docker-updated.bat
```

## Исправление файла .env вручную

Если вы хотите исправить файл .env вручную, выполните:

```bash
node scripts/fix-env.js
```

Этот скрипт:
1. Создает резервную копию файла .env в .env.backup
2. Исправляет некорректные шаблоны вида ${process.env.URL_85}
3. Сохраняет исправленный файл .env

## Запуск тестов

Для запуска тестов выполните:

```bash
npm test
```

## Важное замечание

Из-за несовместимости Node.js 22.17.0 с некоторыми пакетами (fast-jwt, skia-canvas), настоятельно рекомендуется использовать Docker для запуска проекта. Docker-контейнер использует Node.js 18, который полностью совместим со всеми зависимостями проекта.
