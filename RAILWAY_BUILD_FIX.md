# üîß Railway Build Fix - VHM24

## –ü—Ä–æ–±–ª–µ–º–∞
Railway –ø—ã—Ç–∞–ª—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Turborepo –¥–ª—è —Å–±–æ—Ä–∫–∏, –Ω–æ:
1. –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–æ –ø–æ–ª–µ `packageManager` –≤ package.json
2. Turbo —Ç—Ä–µ–±–æ–≤–∞–ª —Å–±–æ—Ä–∫—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞, –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç –≤ –ø—Ä–æ–µ–∫—Ç–µ
3. –ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–µ–∂–¥—É –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º –∏ Railway build –ø—Ä–æ—Ü–µ—Å—Å–æ–º

## –†–µ—à–µ–Ω–∏–µ

### 1. –£–¥–∞–ª–µ–Ω Turborepo
- –£–±—Ä–∞–Ω –∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –£–¥–∞–ª–µ–Ω turbo.json
- –û–±–Ω–æ–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã –≤ package.json

### 2. –°–æ–∑–¥–∞–Ω nixpacks.toml
```toml
[phases.setup]
nixPkgs = ["nodejs-18_x", "npm-9_x"]

[phases.install]
cmds = ["npm install --workspaces --if-present"]

[phases.build]
cmds = ["npm run db:generate"]

[start]
cmd = "node index.js"
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω railway.json
```json
{
  "build": {
    "builder": "NIXPACKS",
    "buildCommand": "npm install --workspaces --if-present && npm run db:generate"
  },
  "deploy": {
    "startCommand": "node index.js"
  }
}
```

### 4. –£–ø—Ä–æ—â–µ–Ω package.json
- –£–±—Ä–∞–Ω turbo –∏–∑ devDependencies
- –û–±–Ω–æ–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –ø—Ä—è–º–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ workspaces

## –¢–µ–ø–µ—Ä—å Railway –¥–æ–ª–∂–µ–Ω:
1. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –≤—Å–µ—Ö workspaces
2. ‚úÖ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Prisma –∫–ª–∏–µ–Ω—Ç
3. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å index.js –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–∞—Ä—Ç—É–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã

## –ü—Ä–æ–≤–µ—Ä–∫–∞
–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- Build logs –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –æ—à–∏–±–æ–∫ turbo
- –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ index.js
- Health check –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

---
*–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: 09.01.2025*
