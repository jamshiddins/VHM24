# üö® Railway - –§–∏–Ω–∞–ª—å–Ω—ã–µ —à–∞–≥–∏ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## –ü—Ä–æ–±–ª–µ–º–∞ 1: Telegram Bot Error
–û—à–∏–±–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é –∫–æ–¥–∞. 

### –†–µ—à–µ–Ω–∏–µ:
```bash
# –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .
git commit -m "Fix telegram bot __dirname error"
git push
```

## –ü—Ä–æ–±–ª–µ–º–∞ 2: DATABASE_URL Error
```
error: Error validating datasource `db`: the URL must start with the protocol `postgresql://` or `postgres://`
```

### –†–µ—à–µ–Ω–∏–µ –≤ Railway:

1. **–£–¥–∞–ª–∏—Ç–µ —Ç–µ–∫—É—â–∏–π DATABASE_URL** –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å

2. **–î–æ–±–∞–≤—å—Ç–µ PostgreSQL —Å–µ—Ä–≤–∏—Å**:
   - New ‚Üí Database ‚Üí Add PostgreSQL
   - –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–∑–¥–∞–Ω–∏—è

3. **–í –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–æ–±–∞–≤—å—Ç–µ**:
   ```
   DATABASE_URL=${{Postgres.DATABASE_URL}}
   ```
   
   ‚ö†Ô∏è **–í–ê–ñ–ù–û**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–º–µ–Ω–Ω–æ `${{Postgres.DATABASE_URL}}` - —ç—Ç–æ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å –Ω–∞ Railway PostgreSQL!

4. **–î–æ–±–∞–≤—å—Ç–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**:
   ```
   REDIS_URL=${{Redis.REDIS_URL}}
   JWT_SECRET=your-super-secret-key-32-chars-minimum
   JWT_EXPIRES_IN=7d
   NODE_ENV=production
   ```

## üìã –ß–µ–∫–ª–∏—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

- [ ] Git push –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] PostgreSQL —Å–µ—Ä–≤–∏—Å –¥–æ–±–∞–≤–ª–µ–Ω –≤ Railway
- [ ] Redis —Å–µ—Ä–≤–∏—Å –¥–æ–±–∞–≤–ª–µ–Ω –≤ Railway  
- [ ] DATABASE_URL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ—Ñ–µ—Ä–µ–Ω—Å `${{Postgres.DATABASE_URL}}`
- [ ] –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] Railway –ø–µ—Ä–µ—Å–æ–±—Ä–∞–ª –ø—Ä–æ–µ–∫—Ç —Å –Ω–æ–≤—ã–º –∫–æ–¥–æ–º

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. –í –ª–æ–≥–∞—Ö –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫:
   - `SyntaxError: Identifier '__dirname'`
   - `Can't reach database server`
   - `the URL must start with the protocol`

2. –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –¥–æ–ª–∂–Ω—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è:
   - Gateway –Ω–∞ –ø–æ—Ä—Ç—É 8000
   - Auth –Ω–∞ –ø–æ—Ä—Ç—É 3001
   - –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–∞ —Å–≤–æ–∏—Ö –ø–æ—Ä—Ç–∞—Ö

3. Health check –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å:
   ```
   https://your-app.railway.app/health
   ```

## üí° –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞—é—Ç—Å—è:

1. **–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç**:
   - –í Railway Dashboard ‚Üí Deploy ‚Üí Redeploy

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**:
   - Variables ‚Üí Raw Editor
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ DATABASE_URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

3. **–ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î** (–ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞):
   ```bash
   railway run npm run db:migrate
   ```

---
*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 09.01.2025*
