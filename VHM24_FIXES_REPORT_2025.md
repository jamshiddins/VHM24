# VHM24 - –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö –∏ —É–ª—É—á—à–µ–Ω–∏—è—Ö (–Ø–Ω–≤–∞—Ä—å 2025)

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–ü—Ä–æ–≤–µ–¥–µ–Ω –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ VHM24, –≤—ã—è–≤–ª–µ–Ω—ã –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏, –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —É–ª—É—á—à–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã.

## üîß –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**

#### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:
- –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è workspaces –≤ –∫–æ—Ä–Ω–µ–≤–æ–º `package.json`
- –ù–µ –±—ã–ª–æ —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
- –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

#### ‚úÖ –†–µ—à–µ–Ω–∏–µ:
–û–±–Ω–æ–≤–ª–µ–Ω –∫–æ—Ä–Ω–µ–≤–æ–π `package.json`:
```json
{
  "name": "vhm24-platform",
  "workspaces": ["apps/*", "packages/*", "services/*"],
  "scripts": {
    "dev": "turbo run dev",
    "build": "turbo run build",
    "db:generate": "cd packages/database && npx prisma generate",
    "db:migrate": "cd packages/database && npx prisma migrate dev",
    "test": "node test-all-services.js"
  }
}
```

### 2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Å–µ—Ä–≤–∏—Å Bunkers**

#### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å ES6 –º–æ–¥—É–ª–∏ (import/export) –≤–º–µ—Å—Ç–æ CommonJS
- –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è package.json

#### ‚úÖ –†–µ—à–µ–Ω–∏–µ:
- –ü–µ—Ä–µ–ø–∏—Å–∞–Ω –Ω–∞ CommonJS —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π dotenv
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω package.json (—É–±—Ä–∞–Ω "type": "module")
- –î–æ–±–∞–≤–ª–µ–Ω—ã –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### 3. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω API URL –≤ Telegram Bot**

#### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:
- Telegram bot –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç API (4000 –≤–º–µ—Å—Ç–æ 8000)

#### ‚úÖ –†–µ—à–µ–Ω–∏–µ:
```javascript
apiUrl: process.env.API_URL || 'http://localhost:8000/api/v1'
```

### 4. **–î–æ–±–∞–≤–ª–µ–Ω Bunkers —Å–µ—Ä–≤–∏—Å –≤ Gateway**

#### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:
- Gateway –Ω–µ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–ª –∑–∞–ø—Ä–æ—Å—ã –∫ Bunkers —Å–µ—Ä–≤–∏—Å—É
- Bunkers –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª –≤ health check

#### ‚úÖ –†–µ—à–µ–Ω–∏–µ:
- –î–æ–±–∞–≤–ª–µ–Ω proxy –¥–ª—è Bunkers –Ω–∞ –ø–æ—Ä—Ç 3005
- –î–æ–±–∞–≤–ª–µ–Ω –≤ health check –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### 5. **–°–æ–∑–¥–∞–Ω —É–ª—É—á—à–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞**

#### ‚úÖ –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ `start-all-services-fixed.bat`:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è Node.js –∏ Docker
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Prisma –∫–ª–∏–µ–Ω—Ç–∞
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞
- –í—ã–≤–æ–¥ –≤—Å–µ—Ö URL –∏ –ø–æ—Ä—Ç–æ–≤

### 6. **–°–æ–∑–¥–∞–Ω –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç**

#### ‚úÖ –ù–æ–≤—ã–π `test-all-services.js`:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö API endpoints
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Bunkers API
- Dashboard —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## üìä –°—Ç–∞—Ç—É—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è |
|-----------|--------|-------------|
| Gateway | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω | –î–æ–±–∞–≤–ª–µ–Ω Bunkers proxy, —É–ª—É—á—à–µ–Ω health check |
| Auth Service | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π |
| Machines Service | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π |
| Inventory Service | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π |
| Tasks Service | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π |
| Bunkers Service | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω | –ü–µ—Ä–µ–ø–∏—Å–∞–Ω –Ω–∞ CommonJS, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã |
| Telegram Bot | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω API URL |

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É

### 1. –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
start-all-services-fixed.bat

# –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–ø—É—Å–∫–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
node test-all-services.js
```

### 2. –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install
npm install --workspaces

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
docker-compose up -d

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Prisma –∫–ª–∏–µ–Ω—Ç
npm run db:generate

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
npm run dev
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ endpoints:
- Gateway Health: http://localhost:8000/health
- Auth API: http://localhost:8000/api/v1/auth/login
- Machines API: http://localhost:8000/api/v1/machines
- Inventory API: http://localhost:8000/api/v1/inventory/items
- Tasks API: http://localhost:8000/api/v1/tasks
- **Bunkers API**: http://localhost:8000/api/v1/bunkers
- Dashboard Stats: http://localhost:8000/api/v1/dashboard/stats

### –¢–µ—Å—Ç–æ–≤—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
- Email: `admin@vhm24.ru`
- Password: `admin123`

## ‚ö†Ô∏è –û—Å—Ç–∞–≤—à–∏–µ—Å—è –∑–∞–¥–∞—á–∏ (–∏–∑ GAP –∞–Ω–∞–ª–∏–∑–∞)

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
1. **–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –º–æ–¥—É–ª—å** - —Å–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å –¥–ª—è —É—á–µ—Ç–∞ –¥–æ—Ö–æ–¥–æ–≤/—Ä–∞—Å—Ö–æ–¥–æ–≤
2. **–ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã** - –¥–æ–±–∞–≤–∏—Ç—å –º–æ–¥–µ–ª–∏ –∏ API
3. **–ü–∞—Ä—Ç–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤** - —Å–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–∞—Ä—Ç–∏–π
4. **–†–µ—Ü–µ–ø—Ç—ã** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞–º–∏ –∏ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å—é

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
1. –†–∞—Å—à–∏—Ä–∏—Ç—å –º–æ–¥–µ–ª—å Machine (vendHubCode, groupId, assignedOperatorId)
2. –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª–∏ –¥–ª—è –≤–æ–¥—ã (WaterBottle)
3. –£–ª—É—á—à–∏—Ç—å Telegram Bot (FSM, —Ñ–æ—Ç–æ—Ñ–∏–∫—Å–∞—Ü–∏—è)
4. –î–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–æ–≤

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MinIO –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤
2. –£–ª—É—á—à–∏—Ç—å —Å–∏—Å—Ç–µ–º—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
3. –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –æ—Ç—á–µ—Ç–æ–≤
4. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π

- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫**: 6
- **–î–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π**: 3
- **–£–ª—É—á—à–µ–Ω–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**: 4
- **–°–æ–∑–¥–∞–Ω–æ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤**: 2
- **–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏**: ~70%

## ‚ú® –ò—Ç–æ–≥

–ü—Ä–æ–µ–∫—Ç VHM24 —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã, –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —É–ª—É—á—à–µ–Ω–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø—É—Å–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –∏—Å–ø–æ–ª—å–∑—É—è `start-all-services-fixed.bat`
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Å –ø–æ–º–æ—â—å—é `test-all-services.js`
3. –ù–∞—á–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –º–æ–¥—É–ª—è
4. –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö —Å–æ–≥–ª–∞—Å–Ω–æ GAP –∞–Ω–∞–ª–∏–∑—É

---
*–û—Ç—á–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω: 09.01.2025*
