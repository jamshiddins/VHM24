# üöÇ VHM24 Railway Deployment - –û–ö–û–ù–ß–ê–¢–ï–õ–¨–ù–û–ï –†–ï–®–ï–ù–ò–ï

## üìã –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú–´

### ‚úÖ **–ü–†–û–ë–õ–ï–ú–ê –í–´–Ø–í–õ–ï–ù–ê –ò –ò–°–ü–†–ê–í–õ–ï–ù–ê:**

**–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø: –°—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**

- ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞**: scripts/check-env.js —Ç—Ä–µ–±–æ–≤–∞–ª –Ω–∞–ª–∏—á–∏—è –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (DATABASE_URL, REDIS_URL,
  JWT_SECRET, TELEGRAM_BOT_TOKEN) –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ **–†–µ—à–µ–Ω–∏–µ**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —É–º–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–∞–ø—É—Å–∫–∞–µ–º–æ–≥–æ
  —Å–µ—Ä–≤–∏—Å–∞

## üõ†Ô∏è **–í–ù–ï–°–ï–ù–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø:**

### –û–±–Ω–æ–≤–ª–µ–Ω `scripts/check-env.js`

```javascript
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–∞–∫–æ–π —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
const SERVICE =
  process.env.RAILWAY_SERVICE_NAME ||
  process.env.SERVICE_NAME ||
  detectServiceFromPath() ||
  'gateway';

// –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
const serviceRequirements = {
  gateway: ['DATABASE_URL'],
  auth: ['DATABASE_URL', 'JWT_SECRET'],
  'telegram-bot': ['DATABASE_URL', 'TELEGRAM_BOT_TOKEN'],
  notifications: ['DATABASE_URL', 'TELEGRAM_BOT_TOKEN'],
  'data-import': ['DATABASE_URL'],
  backup: ['DATABASE_URL', 'S3_BUCKET', 'S3_ACCESS_KEY', 'S3_SECRET_KEY']
  // –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–∑–æ–≤—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
};

// –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
const required = serviceRequirements[SERVICE] || baseRequired;
```

## üéØ **–ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –ù–û–í–û–ì–û –†–ï–®–ï–ù–ò–Ø:**

### ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Ç–µ–∫—É—â–∞—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–∫—Ä–∏–ø—Ç—ã**: –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- **Railway –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–∑–º–µ–Ω–µ–Ω–∏–µ railway.toml –∏–ª–∏ nixpacks.toml

### ‚úÖ –ì–∏–±–∫–æ—Å—Ç—å

- **–°–µ—Ä–≤–∏—Å-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è**: –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å —Ç—Ä–µ–±—É–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –µ–º—É –Ω—É–∂–Ω—ã
- **–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞**: –°–µ—Ä–≤–∏—Å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ –ø—É—Ç–∏
- **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ –æ—à–∏–±–æ–∫**: –î–ª—è –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤—ã–≤–æ–¥—è—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ
  –æ—à–∏–±–æ–∫

### ‚úÖ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å

- **–ü—Ä–æ–≤–µ—Ä–∫–∞ JWT —Å–µ–∫—Ä–µ—Ç–∞**: –°—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–º —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ S3 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**: –°—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–º —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
- **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–≤–µ—Ä—è–µ–º—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

## üöÄ **–ü–†–û–¶–ï–°–° –ó–ê–ü–£–°–ö–ê:**

### 1. Railway –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–µ—Ä–≤–∏—Å –¥–ª—è –∑–∞–ø—É—Å–∫–∞

```bash
# –í Railway Dashboard
RAILWAY_SERVICE_NAME=gateway
```

### 2. –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è scripts/start-production.js

```bash
# –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–µ—Ä–≤–∏—Å –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è
const SERVICE = process.env.RAILWAY_SERVICE_NAME || 'gateway';
```

### 3. –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
üéØ Checking environment variables for service: gateway
‚úÖ All required environment variables for service gateway are set
```

### 4. –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Å–µ—Ä–≤–∏—Å

```bash
üöÄ Starting gateway service...
üìÅ Path: services/gateway
üåê Port: 8000
```

## üîê **–ü–ï–†–ï–ú–ï–ù–ù–´–ï –û–ö–†–£–ñ–ï–ù–ò–Ø:**

### ‚úÖ –î–ª—è Gateway:

```bash
DATABASE_URL=postgresql://... # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
```

### ‚úÖ –î–ª—è Auth:

```bash
DATABASE_URL=postgresql://... # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
JWT_SECRET=your-secret-key    # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
```

### ‚úÖ –î–ª—è Telegram Bot:

```bash
DATABASE_URL=postgresql://...   # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
TELEGRAM_BOT_TOKEN=your-token   # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
```

### ‚úÖ –î–ª—è Backup:

```bash
DATABASE_URL=postgresql://...   # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
S3_BUCKET=your-bucket           # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
S3_ACCESS_KEY=your-access-key   # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
S3_SECRET_KEY=your-secret-key   # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
```

## üß™ **–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:**

### 1. –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Gateway:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ DATABASE_URL
export DATABASE_URL=postgresql://...

# –ó–∞–ø—É—Å—Ç–∏—Ç—å Gateway
RAILWAY_SERVICE_NAME=gateway npm run start:production
```

### 2. –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Auth:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å DATABASE_URL –∏ JWT_SECRET
export DATABASE_URL=postgresql://...
export JWT_SECRET=your-secret-key

# –ó–∞–ø—É—Å—Ç–∏—Ç—å Auth
RAILWAY_SERVICE_NAME=auth npm run start:production
```

## üìä **–†–ï–ó–£–õ–¨–¢–ê–¢:**

### ‚úÖ **–ü–†–û–ë–õ–ï–ú–ê –†–ï–®–ï–ù–ê:**

- ‚úÖ –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å —Ç—Ä–µ–±—É–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –µ–º—É –Ω—É–∂–Ω—ã
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ç–µ–∫—É—â–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–∑–º–µ–Ω–µ–Ω–∏–µ railway.toml –∏–ª–∏ nixpacks.toml
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### üöÄ **–ì–û–¢–û–í –ö –î–ï–ü–õ–û–Æ:**

```bash
# –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –¥–µ–ø–ª–æ—è:
git push origin main

# –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
railway logs
```

### üìä **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

- ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –¥–µ–ø–ª–æ–π –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å –Ω—É–∂–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –Ω–µ–Ω—É–∂–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

---

## üîó **–°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:**

1. **–í—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–ø–ª–æ–π**: `git push origin main`
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏**: `railway logs`
3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**: –í Railway dashboard –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã –≤ Railway

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ production –¥–µ–ø–ª–æ—é –Ω–∞ Railway! üéâ**
