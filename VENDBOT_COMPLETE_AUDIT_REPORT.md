# üéØ –ü–û–õ–ù–´–ô –ê–£–î–ò–¢ –ü–†–û–ï–ö–¢–ê VENDBOT - –î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó

**–î–∞—Ç–∞:** 7 —è–Ω–≤–∞—Ä—è 2025  
**–í—Ä–µ–º—è:** 11:30 UTC+5  
**–°—Ç–∞—Ç—É—Å:** üîç –ö–û–ú–ü–õ–ï–ö–°–ù–´–ô –ê–£–î–ò–¢ –ó–ê–í–ï–†–®–ï–ù

---

## üìä –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï –ü–†–û–ï–ö–¢–ê

### üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê:
- **–¢–∏–ø:** –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π backend + Next.js frontend
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL (Railway) ‚úÖ
- **–ö—ç—à:** Redis (Railway) ‚úÖ
- **–§–∞–π–ª—ã:** DigitalOcean Spaces ‚úÖ
- **–î–µ–ø–ª–æ–π:** Railway ‚úÖ

### üìÅ –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê:
```
VHM24/
‚îú‚îÄ‚îÄ backend/src/           # –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π API (Express.js)
‚îú‚îÄ‚îÄ apps/web-dashboard/    # Next.js —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ ‚úÖ
‚îú‚îÄ‚îÄ apps/telegram-bot/     # ‚ùå –ü–£–°–¢–ê–Ø –î–ò–†–ï–ö–¢–û–†–ò–Ø (.gitkeep)
‚îú‚îÄ‚îÄ services/              # ‚ùå –û–¢–°–£–¢–°–¢–í–£–ï–¢
‚îî‚îÄ‚îÄ prisma/               # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å—Ö–µ–º–∞ ‚úÖ
```

---

## üîê 1. –ê–ù–ê–õ–ò–ó –ü–ï–†–ï–ú–ï–ù–ù–´–• –û–ö–†–£–ñ–ï–ù–ò–Ø

### ‚úÖ –ù–ê–°–¢–†–û–ï–ù–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï (Railway):
- **DATABASE_URL:** `postgresql://postgres:***@postgres.railway.internal:5432/railway` ‚úÖ
- **REDIS_URL:** `redis://default:***@redis.railway.internal:6379` ‚úÖ
- **JWT_SECRET:** –ù–∞—Å—Ç—Ä–æ–µ–Ω ‚úÖ
- **TELEGRAM_BOT_TOKEN:** –ù–∞—Å—Ç—Ä–æ–µ–Ω ‚úÖ
- **S3_ACCESS_KEY:** –ù–∞—Å—Ç—Ä–æ–µ–Ω ‚úÖ
- **S3_SECRET_KEY:** –ù–∞—Å—Ç—Ä–æ–µ–Ω ‚úÖ
- **S3_BUCKET:** `vhm24-uploads-2025` ‚úÖ
- **S3_ENDPOINT:** `https://nyc3.digitaloceanspaces.com` ‚úÖ
- **API_URL:** `https://vhm24-production.up.railway.app/api/v1` ‚úÖ

### ‚ùå –ü–†–û–ë–õ–ï–ú–´ –° –ú–ò–ö–†–û–°–ï–†–í–ò–°–ù–´–ú–ò –ê–î–†–ï–°–ê–ú–ò:
```javascript
// –í Railway –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –Ω–∞–π–¥–µ–Ω—ã localhost –∞–¥—Ä–µ—Å–∞:
AUTH_SERVICE_URL=http://127.0.0.1:3001          // ‚ùå –ù–ï–í–ï–†–ù–û
MACHINES_SERVICE_URL=http://127.0.0.1:3002      // ‚ùå –ù–ï–í–ï–†–ù–û
INVENTORY_SERVICE_URL=http://127.0.0.1:3003     // ‚ùå –ù–ï–í–ï–†–ù–û
TASKS_SERVICE_URL=http://127.0.0.1:3004         // ‚ùå –ù–ï–í–ï–†–ù–û
BUNKERS_SERVICE_URL=http://127.0.0.1:3005       // ‚ùå –ù–ï–í–ï–†–ù–û
```

---

## ‚öôÔ∏è 2. –ê–ù–ê–õ–ò–ó –ú–ò–ö–†–û–°–ï–†–í–ò–°–ù–û–ô –ê–†–•–ò–¢–ï–ö–¢–£–†–´

### ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: –û–¢–°–£–¢–°–¢–í–ò–ï –ú–ò–ö–†–û–°–ï–†–í–ò–°–û–í
- **–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `services/`:** –ù–ï –°–£–©–ï–°–¢–í–£–ï–¢
- **Telegram Bot:** –¢–æ–ª—å–∫–æ .gitkeep —Ñ–∞–π–ª
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã:** –°—Å—ã–ª–∫–∏ –≤ –∫–æ–¥–µ, –Ω–æ —Ñ–∞–π–ª—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç

### üîç –ù–ê–ô–î–ï–ù–ù–´–ï –°–°–´–õ–ö–ò –ù–ê –ú–ò–ö–†–û–°–ï–†–í–ò–°–´:
```javascript
// –í –∫–æ–¥–µ –Ω–∞–π–¥–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã:
'services/telegram-bot/src/index.js'     // ‚ùå –ù–ï –°–£–©–ï–°–¢–í–£–ï–¢
'services/auth/src/index.js'             // ‚ùå –ù–ï –°–£–©–ï–°–¢–í–£–ï–¢
'services/machines/src/index.js'         // ‚ùå –ù–ï –°–£–©–ï–°–¢–í–£–ï–¢
'services/inventory/src/index.js'        // ‚ùå –ù–ï –°–£–©–ï–°–¢–í–£–ï–¢
'services/tasks/src/index.js'            // ‚ùå –ù–ï –°–£–©–ï–°–¢–í–£–ï–¢
'services/warehouse/src/index.js'        // ‚ùå –ù–ï –°–£–©–ï–°–¢–í–£–ï–¢
```

### üèóÔ∏è –†–ï–ê–õ–¨–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê:
- **–ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π backend:** `backend/src/index.js` ‚úÖ
- **API Routes:** –í—Å–µ –≤ `backend/src/routes/` ‚úÖ
- **–ï–¥–∏–Ω—ã–π –ø–æ—Ä—Ç:** 8000 ‚úÖ

---

## üß© 3. –ê–ù–ê–õ–ò–ó FSM TELEGRAM –ë–û–¢–ê

### ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: TELEGRAM –ë–û–¢ –û–¢–°–£–¢–°–¢–í–£–ï–¢
- **–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:** `apps/telegram-bot/` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ `.gitkeep`
- **FSM –ª–æ–≥–∏–∫–∞:** –ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–ê
- **Redis –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** –ù–ï –ù–ê–°–¢–†–û–ï–ù–ê –¥–ª—è FSM
- **–†–æ–ª–∏ –≤ –±–æ—Ç–µ:** –ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–´

### üìã –¢–†–ï–ë–£–ï–¢–°–Ø –°–û–ó–î–ê–¢–¨:
1. **FSM —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è —Ä–æ–ª–µ–π:**
   - admin: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π
   - manager: –æ—Ç—á–µ—Ç—ã, –∫–∞—Ä—Ç–æ—á–∫–∏, –∑–∞–¥–∞—á–∏
   - warehouse: —Å–∫–ª–∞–¥, –±—É–Ω–∫–µ—Ä—ã, –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è
   - operator: –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∞–º–∏
   - technician: —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
   - driver: –º–∞—Ä—à—Ä—É—Ç—ã, –ª–æ–≥–∏—Å—Ç–∏–∫–∞

2. **Redis FSM —Ö—Ä–∞–Ω–∏–ª–∏—â–µ**
3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å S3 –¥–ª—è –º–µ–¥–∏–∞**
4. **–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ**

---

## üßæ 4. –ê–ù–ê–õ–ò–ó –§–£–ù–ö–¶–ò–ô –ü–û –†–û–õ–Ø–ú

### ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–´–ï –§–£–ù–ö–¶–ò–ò (Backend API):

#### üì¶ **Warehouse (–°–∫–ª–∞–¥):**
- ‚úÖ –¢–æ–≤–∞—Ä—ã –Ω–∞ —Å–∫–ª–∞–¥–µ (`/api/v1/warehouse/items`)
- ‚úÖ –û–ø–µ—Ä–∞—Ü–∏–∏ —Å–∫–ª–∞–¥–∞ (`/api/v1/warehouse/operations`)
- ‚ùå –ë—É–Ω–∫–µ—Ä—ã (–∑–∞–≥–ª—É—à–∫–∞, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `[]`)
- ‚ùå –§–æ—Ç–æ/–≤–∏–¥–µ–æ —Ñ–∏–∫—Å–∞—Ü–∏—è
- ‚ùå –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è
- ‚ùå –ö–æ–º–ø–ª–µ–∫—Ç—ã (—Å—É–º–∫–∏)

#### üìã **Manager (–ú–µ–Ω–µ–¥–∂–µ—Ä):**
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (`/api/v1/users`)
- ‚úÖ –ú–∞—à–∏–Ω—ã (`/api/v1/machines`)
- ‚úÖ –ó–∞–¥–∞—á–∏ (`/api/v1/tasks`)
- ‚úÖ –î–∞—à–±–æ—Ä–¥ (`/api/v1/dashboard`)
- ‚ùå –û—Ç—á–µ—Ç—ã Excel
- ‚ùå –°–≤–µ—Ä–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- ‚ùå –§–∏–Ω–∞–Ω—Å—ã

#### üõ†Ô∏è **Technician/Driver/Operator:**
- ‚úÖ –ë–∞–∑–æ–≤—ã–µ API endpoints
- ‚ùå –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–æ–ª–µ–π
- ‚ùå –ú–æ–±–∏–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚ùå FSM —Å—Ü–µ–Ω–∞—Ä–∏–∏

### ‚ùå –ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–´–ï –§–£–ù–ö–¶–ò–ò:
1. **–§–æ—Ç–æ/–≤–∏–¥–µ–æ –∑–∞–≥—Ä—É–∑–∫–∞** –≤ –æ–ø–µ—Ä–∞—Ü–∏–∏
2. **Excel –∏–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç**
3. **–ü–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã** (VendHub, Multikassa, Payme, Click, Uzum)
4. **–ê–≤—Ç–æ—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á**
5. **–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ** —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–±—ã—Ç–∏—è/–≤–≤–æ–¥–∞
6. **–ë—É–Ω–∫–µ—Ä—ã** (–æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ —Å—Ö–µ–º–µ –ë–î)

---

## üß† 5. –£–ü–†–ê–í–õ–ï–ù–ò–ï –ü–†–ê–í–ê–ú–ò

### ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û:
- **–†–æ–ª–∏ –≤ –ë–î:** `UserRole` enum (ADMIN, MANAGER, WAREHOUSE, OPERATOR, TECHNICIAN, DRIVER)
- **–°–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å-—Ä–æ–ª–∏:** `User.roles[]`
- **JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** ‚úÖ

### ‚ùå –ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û:
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤** –≤ middleware
- **JSON-–º–æ–¥–µ–ª—å** —Ñ—É–Ω–∫—Ü–∏–π ‚Üí —Ä–æ–ª–∏
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞** –Ω–∞ –∫–∞–∂–¥–æ–º –¥–µ–π—Å—Ç–≤–∏–∏

---

## üóÉÔ∏è 6. –•–†–ê–ù–ï–ù–ò–ï –§–ê–ô–õ–û–í (S3)

### ‚úÖ –ù–ê–°–¢–†–û–ï–ù–û:
- **DigitalOcean Spaces:** –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã ‚úÖ
- **Bucket:** `vhm24-uploads-2025` —Å–æ–∑–¥–∞–Ω ‚úÖ
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ó–∞–≥—Ä—É–∑–∫–∞/—á—Ç–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ

### ‚ùå –ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø –í –ö–û–î–ï:
- **Telegram FSM:** –ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å S3
- **–û—Ç—á–µ—Ç—ã:** –ù–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ Excel
- **–ú–µ–¥–∏–∞ –≤ –æ–ø–µ—Ä–∞—Ü–∏—è—Ö:** –ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ
- **AWS SDK:** –ù–µ –Ω–∞–π–¥–µ–Ω –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö

---

## üìÅ 7. –ó–ê–ì–†–£–ó–ö–ê/–ò–ú–ü–û–†–¢ –î–ê–ù–ù–´–•

### ‚úÖ –ï–°–¢–¨ API ENDPOINT:
- **Data Import:** `/api/v1/data-import` ‚úÖ

### ‚ùå –ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û:
- **Excel –∑–∞–≥—Ä—É–∑–∫–∞** —á–µ—Ä–µ–∑ Telegram
- **–¢–∏–ø—ã –æ—Ç—á–µ—Ç–æ–≤:** VendHub, –ø–ª–∞—Ç–µ–∂–∫–∏
- **–°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫**
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏** –∏–∑ –æ—Ç—á–µ—Ç–æ–≤

---

## üì¶ 8. –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

### ‚úÖ –¢–ï–ö–£–©–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê:
- **–ú–æ–Ω–æ–ª–∏—Ç:** –û–¥–∏–Ω backend —Å–µ—Ä–≤–∏—Å ‚úÖ
- **–ï–¥–∏–Ω—ã–π –ø–æ—Ä—Ç:** 8000 ‚úÖ
- **Railway –¥–µ–ø–ª–æ–π:** –†–∞–±–æ—Ç–∞–µ—Ç ‚úÖ

### ‚ùå –ü–†–û–ë–õ–ï–ú–´:
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã:** –°—Å—ã–ª–∫–∏ –≤ –∫–æ–¥–µ, –Ω–æ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
- **127.0.0.1 –∞–¥—Ä–µ—Å–∞:** –í –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–ù–µ—Ç gateway:** –î–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤

### üîß –†–ï–®–ï–ù–ò–ï:
1. **–£–±—Ä–∞—Ç—å —Å—Å—ã–ª–∫–∏** –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. **–ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã** –µ—Å–ª–∏ –Ω—É–∂–Ω—ã

---

## üìä 9. –õ–û–ì–ò–†–û–í–ê–ù–ò–ï

### ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û:
- **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ª–æ–≥–≥–µ—Ä:** `backend/src/utils/logger.js` ‚úÖ
- **Fastify logger:** –ó–∞–º–µ–Ω–µ–Ω console.log ‚úÖ
- **Audit Log:** –ú–æ–¥–µ–ª—å –≤ –ë–î ‚úÖ
- **System Audit Log:** –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å ‚úÖ

### ‚ùå –ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø:
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ** –≤ –æ–ø–µ—Ä–∞—Ü–∏—è—Ö
- **–§–æ—Ç–æ/–≤–∏–¥–µ–æ** –≤ –ª–æ–≥–∞—Ö

---

## üñ•Ô∏è 10. WEB + MOBILE –ò–ù–¢–ï–†–§–ï–ô–°

### ‚úÖ WEB –ò–ù–¢–ï–†–§–ï–ô–°:
- **Next.js Dashboard:** `apps/web-dashboard/` ‚úÖ
- **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω:** Tailwind CSS ‚úÖ
- **API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ ‚úÖ

### ‚ùå MOBILE –ò–ù–¢–ï–†–§–ï–ô–°:
- **PWA:** –ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- **–ú–æ–±–∏–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** –ù–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- **Telegram Web App:** –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω

---

## üì¶ 11. GIT DEPLOY

### ‚úÖ –ù–ê–°–¢–†–û–ï–ù–û:
- **Railway:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π ‚úÖ
- **GitHub Actions:** CI/CD pipeline ‚úÖ
- **Docker:** Dockerfile –≥–æ—Ç–æ–≤ ‚úÖ
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:** –ë–µ–∑–æ–ø–∞—Å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã ‚úÖ

---

## üéØ –°–ü–ò–°–û–ö –ö–†–ò–¢–ò–ß–ï–°–ö–ò–• –ü–†–û–ë–õ–ï–ú

### üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï (–ë–õ–û–ö–ò–†–£–Æ–©–ò–ï):

1. **TELEGRAM BOT –û–¢–°–£–¢–°–¢–í–£–ï–¢**
   - –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞—è (—Ç–æ–ª—å–∫–æ .gitkeep)
   - FSM –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
   - –ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Redis

2. **–ú–ò–ö–†–û–°–ï–†–í–ò–°–´ –ù–ï –°–£–©–ï–°–¢–í–£–Æ–¢**
   - –°—Å—ã–ª–∫–∏ –≤ –∫–æ–¥–µ –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã
   - 127.0.0.1 –∞–¥—Ä–µ—Å–∞ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
   - –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è services/ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

3. **–§–£–ù–ö–¶–ò–ò –ü–û –†–û–õ–Ø–ú –ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–´**
   - –ù–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è warehouse
   - –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –±—É–Ω–∫–µ—Ä—ã –≤ –ë–î
   - –ù–µ—Ç —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ –∑–∞–≥—Ä—É–∑–∫–∏

### ‚ö†Ô∏è –í–ê–ñ–ù–´–ï (–¢–†–ï–ë–£–Æ–¢ –í–ù–ò–ú–ê–ù–ò–Ø):

4. **S3 –ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø –í –ö–û–î–ï**
   - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã, –Ω–æ –Ω–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
   - AWS SDK –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö

5. **EXCEL –ò–ú–ü–û–†–¢ –ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù**
   - –ù–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Ç—á–µ—Ç–æ–≤
   - –ù–µ—Ç —Å–≤–µ—Ä–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π

6. **–ü–†–ê–í–ê –î–û–°–¢–£–ü–ê –ù–ï –ü–†–û–í–ï–†–Ø–Æ–¢–°–Ø**
   - –ù–µ—Ç middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–µ–π
   - –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ —Ñ—É–Ω–∫—Ü–∏—è–º

---

## üîß –ö–û–ù–ö–†–ï–¢–ù–´–ô –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### üìã –≠–¢–ê–ü 1: –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ê–†–•–ò–¢–ï–ö–¢–£–†–´

#### 1.1 –£–±—Ä–∞—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã:
```bash
# –ù–∞–π—Ç–∏ –∏ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ services/
grep -r "services/" --include="*.js" . | grep -v node_modules
```

#### 1.2 –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
# –ó–∞–º–µ–Ω–∏—Ç—å –≤ Railway:
AUTH_SERVICE_URL=https://vhm24-production.up.railway.app/api/v1/auth
MACHINES_SERVICE_URL=https://vhm24-production.up.railway.app/api/v1/machines
# ... –∏ —Ç.–¥.
```

### üìã –≠–¢–ê–ü 2: –°–û–ó–î–ê–ù–ò–ï TELEGRAM –ë–û–¢–ê

#### 2.1 –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–æ—Ç–∞:
```
apps/telegram-bot/
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ index.js          # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ fsm/              # FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ manager.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ warehouse.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ operator.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ technician.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ driver.js
‚îÇ   ‚îú‚îÄ‚îÄ handlers/         # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ middleware/       # Middleware –¥–ª—è —Ä–æ–ª–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ utils/           # –£—Ç–∏–ª–∏—Ç—ã
```

#### 2.2 –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```json
{
  "dependencies": {
    "node-telegram-bot-api": "^0.61.0",
    "ioredis": "^5.6.1",
    "axios": "^1.10.0",
    "aws-sdk": "^2.1692.0"
  }
}
```

### üìã –≠–¢–ê–ü 3: –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø FSM –ü–û –†–û–õ–Ø–ú

#### 3.1 Warehouse FSM:
```javascript
// apps/telegram-bot/src/fsm/warehouse.js
const warehouseStates = {
  MAIN_MENU: 'warehouse_main',
  RECEIVE_ITEMS: 'warehouse_receive',
  FILL_BUNKERS: 'warehouse_fill',
  CREATE_KITS: 'warehouse_kits',
  INVENTORY: 'warehouse_inventory',
  PHOTO_UPLOAD: 'warehouse_photo'
};
```

#### 3.2 Manager FSM:
```javascript
// apps/telegram-bot/src/fsm/manager.js
const managerStates = {
  MAIN_MENU: 'manager_main',
  CARDS: 'manager_cards',
  REPORTS: 'manager_reports',
  TASKS: 'manager_tasks',
  FINANCE: 'manager_finance'
};
```

### üìã –≠–¢–ê–ü 4: –î–û–ë–ê–í–õ–ï–ù–ò–ï –ù–ï–î–û–°–¢–ê–Æ–©–ò–• –§–£–ù–ö–¶–ò–ô

#### 4.1 –î–æ–±–∞–≤–∏—Ç—å –±—É–Ω–∫–µ—Ä—ã –≤ —Å—Ö–µ–º—É –ë–î:
```prisma
model Bunker {
  id          String   @id @default(cuid())
  machineId   String
  name        String
  capacity    Float
  currentLevel Float   @default(0)
  itemId      String?
  status      BunkerStatus @default(EMPTY)
  lastFilled  DateTime?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  machine     Machine  @relation(fields: [machineId], references: [id])
  item        InventoryItem? @relation(fields: [itemId], references: [id])
}

enum BunkerStatus {
  EMPTY
  FILLING
  FULL
  MAINTENANCE
}
```

#### 4.2 –î–æ–±–∞–≤–∏—Ç—å S3 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é:
```javascript
// backend/src/utils/s3.js
const AWS = require('aws-sdk');

const s3 = new AWS.S3({
  endpoint: process.env.S3_ENDPOINT,
  accessKeyId: process.env.S3_ACCESS_KEY,
  secretAccessKey: process.env.S3_SECRET_KEY,
  region: process.env.S3_REGION
});

module.exports = { s3 };
```

#### 4.3 –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ –≤ –æ–ø–µ—Ä–∞—Ü–∏–∏:
```prisma
model StockMovement {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
  photos      String[]  // URLs —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
  videos      String[]  // URLs –≤–∏–¥–µ–æ
  eventTime   DateTime  // –í—Ä–µ–º—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è
  inputTime   DateTime  @default(now()) // –í—Ä–µ–º—è –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö
}
```

### üìã –≠–¢–ê–ü 5: –ü–†–ê–í–ê –î–û–°–¢–£–ü–ê

#### 5.1 –°–æ–∑–¥–∞—Ç—å middleware –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–µ–π:
```javascript
// backend/src/middleware/roleCheck.js
const checkRole = (requiredRoles) => {
  return (req, res, next) => {
    const userRoles = req.user.roles;
    const hasRole = requiredRoles.some(role => userRoles.includes(role));
    if (!hasRole) {
      return res.status(403).json({ error: 'Access denied' });
    }
    next();
  };
};
```

#### 5.2 –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫ routes:
```javascript
// backend/src/routes/warehouse.js
router.get('/items', checkRole(['WAREHOUSE', 'ADMIN']), async (req, res) => {
  // ...
});
```

### üìã –≠–¢–ê–ü 6: EXCEL –ò–ú–ü–û–†–¢

#### 6.1 –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```json
{
  "dependencies": {
    "xlsx": "^0.18.5",
    "multer": "^1.4.5-lts.1"
  }
}
```

#### 6.2 –°–æ–∑–¥–∞—Ç—å endpoint –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏:
```javascript
// backend/src/routes/data-import.js
const multer = require('multer');
const XLSX = require('xlsx');

const upload = multer({ dest: 'uploads/' });

router.post('/excel', upload.single('file'), async (req, res) => {
  const workbook = XLSX.readFile(req.file.path);
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ Excel —Ñ–∞–π–ª–∞
});
```

---

## ‚úÖ –ò–¢–û–ì–û–í–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### üéØ –ü–†–ò–û–†–ò–¢–ï–¢ 1 (–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô):
1. **–°–æ–∑–¥–∞—Ç—å Telegram Bot** —Å FSM –¥–ª—è –≤—Å–µ—Ö —Ä–æ–ª–µ–π
2. **–£–±—Ä–∞—Ç—å —Å—Å—ã–ª–∫–∏** –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
3. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** –æ–∫—Ä—É–∂–µ–Ω–∏—è (—É–±—Ä–∞—Ç—å 127.0.0.1)

### üéØ –ü–†–ò–û–†–ò–¢–ï–¢ 2 (–í–´–°–û–ö–ò–ô):
4. **–î–æ–±–∞–≤–∏—Ç—å –±—É–Ω–∫–µ—Ä—ã** –≤ —Å—Ö–µ–º—É –ë–î
5. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å S3 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é** –¥–ª—è —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ
6. **–°–æ–∑–¥–∞—Ç—å middleware** –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–µ–π

### üéØ –ü–†–ò–û–†–ò–¢–ï–¢ 3 (–°–†–ï–î–ù–ò–ô):
7. **Excel –∏–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç**
8. **–ü–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã**
9. **PWA –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö**

### üéØ –ü–†–ò–û–†–ò–¢–ï–¢ 4 (–ù–ò–ó–ö–ò–ô):
10. **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞)
11. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞**
12. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**

---

## üìä –§–ò–ù–ê–õ–¨–ù–ê–Ø –û–¶–ï–ù–ö–ê –ì–û–¢–û–í–ù–û–°–¢–ò

### üèÜ –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï:
- **Backend API:** 70% –≥–æ—Ç–æ–≤ ‚úÖ
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** 80% –≥–æ—Ç–æ–≤–∞ ‚úÖ
- **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:** 95% –≥–æ—Ç–æ–≤–∞ ‚úÖ
- **Telegram Bot:** 0% –≥–æ—Ç–æ–≤ ‚ùå
- **–§—É–Ω–∫—Ü–∏–∏ –ø–æ —Ä–æ–ª—è–º:** 30% –≥–æ—Ç–æ–≤—ã ‚ö†Ô∏è
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã:** 0% –≥–æ—Ç–æ–≤—ã ‚ùå

### üéØ –û–ë–©–ê–Ø –ì–û–¢–û–í–ù–û–°–¢–¨: 45%

**–í–´–í–û–î:** –ü—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç —Ö–æ—Ä–æ—à—É—é –æ—Å–Ω–æ–≤—É (backend API, –ë–î, –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞), –Ω–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç Telegram –±–æ—Ç–∞ –∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –ø–æ —Ä–æ–ª—è–º. –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞, –Ω–æ –µ—Å—Ç—å —Å—Å—ã–ª–∫–∏ –≤ –∫–æ–¥–µ.

**–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:** –°–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–∏ Telegram –±–æ—Ç–∞ –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π –ø–æ —Ä–æ–ª—è–º, –∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –ø–æ—Ç–æ–º –∏–ª–∏ —É–±—Ä–∞—Ç—å —Å—Å—ã–ª–∫–∏ –∏ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –º–æ–Ω–æ–ª–∏—Ç.

---

**–ü—Ä–æ–≤–µ–¥–µ–Ω:** Cline AI Assistant  
**–î–∞—Ç–∞:** 7 —è–Ω–≤–∞—Ä—è 2025, 11:30 UTC+5  
**–í–µ—Ä—Å–∏—è:** VendBot Complete Audit v1.0 ‚úÖ

**–ê–£–î–ò–¢ –ó–ê–í–ï–†–®–ï–ù! –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô –ì–û–¢–û–í! üéØüìãüîß**
