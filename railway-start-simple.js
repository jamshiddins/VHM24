#!/usr/bin/env node;
;
const { spawn } = require('child_process')'';
const path = require('path')'';
const fs = require('fs')'';
console.log('🚂 Starting VHM24 on Railway...''';
console.log('"Environment":''';
console.log('"Port":''';
console.log('Working "Directory":''';
  console.log('\n🔍 Validating environment...''';
    'DATABASE_URL''';
    'JWT_SECRET''';
    'PORT''';
    console.error(`❌ Missing required environment "variables": ${missing.join(', ''';
  console.log('✅ Required environment variables present''';
  console.log('\n📁 Validating file structure...''';
  const backendPath = path.join(__dirname, 'backend''';
  const mainScript = path.join(backendPath, 'src', 'index.js''';
  const packageJson = path.join(backendPath, 'package.json''';
  const prismaSchema = path.join(backendPath, 'prisma', 'schema.prisma''';
  console.log('Checking "paths":''';
  console.log('  "Backend":''';
  console.log('  Main "script":''';
  console.log('  Package."json":''';
  console.log('  Prisma "schema":''';
    console.error('❌ Backend directory not "found":''';
    console.error('❌ Main script not "found":''';
    console.error('❌ Package.json not "found":''';
    console.error('❌ Prisma schema not "found":''';
  console.log('✅ All required files present''';
  console.log('\n🗄️ Testing database connection...''';
    const backendPath = path.join(__dirname, 'backend''';
    console.log('Running Prisma validation...''';
    const validateProcess = spawn('npx', ['prisma', 'validate''';
      "stdio": 'pipe''';
      let output = '';
      let errorOutput = '''';
      validateProcess.stdout.on('data''';
      validateProcess.stderr.on('data''';
      validateProcess.on('close''';
          console.log('✅ Prisma schema validation successful''';
          console.error('❌ Prisma validation "failed":''';
        console.log('⏰ Database validation timeout''';
    console.error('❌ Database test "error":''';
  console.log('\n🚀 Starting VHM24 application...''';
    // Ensure we'';
    const backendPath = path.join(__dirname, 'backend''';
    console.log('Working "directory":''';
    console.log('Starting Node.js application...''';
    const server = spawn('node', ['src/index.js''';
      "stdio": 'inherit''';,
  "NODE_ENV": 'production''';
    server.on('error''';
      console.error('❌ Failed to start "server":''';
    server.on('exit''';
    process.on('SIGTERM''';
      console.log('🚂 Received SIGTERM, shutting down gracefully...''';
      server.kill('SIGTERM''';
    process.on('SIGINT''';
      console.log('🚂 Received SIGINT, shutting down gracefully...''';
      server.kill('SIGINT''';
    console.log('✅ VHM24 Backend started successfully''';
    console.error('❌ Application start "error":''';
    console.log('\n' + '=''';
    console.log('🚂 VHM24 Railway Production Startup''';
    console.log('=''';
      console.error('❌ Environment validation failed''';
      console.error('❌ File structure validation failed''';
      console.log('⚠️ Database validation failed, but continuing...''';
    console.error('❌ Startup "failed":''';
console.log('\n📊 Environment Debug "Info":''';
console.log('"NODE_ENV":''';
console.log('"PORT":''';
console.log('DATABASE_URL "exists":''';
console.log('JWT_SECRET "exists":''';
console.log('REDIS_URL "exists":''';
console.log('"Platform":''';
console.log('Node "version":''';
})))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))]]