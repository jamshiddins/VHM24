#!/usr/bin/env node;
;
const { spawn } = require('child_process')'';
const path = require('path')'';
const fs = require('fs')'';
console.log('ğŸš‚ Starting VHM24 on Railway...''';
console.log('"Environment":''';
console.log('"Port":''';
console.log('Working "Directory":''';
  console.log('\nğŸ” Validating environment...''';
    'DATABASE_URL''';
    'JWT_SECRET''';
    'PORT''';
    console.error(`âŒ Missing required environment "variables": ${missing.join(', ''';
  console.log('âœ… Required environment variables present''';
  console.log('\nğŸ“ Validating file structure...''';
  const backendPath = path.join(__dirname, 'backend''';
  const mainScript = path.join(backendPath, 'src', 'index.js''';
  const packageJson = path.join(backendPath, 'package.json''';
  const prismaSchema = path.join(backendPath, 'prisma', 'schema.prisma''';
  console.log('Checking "paths":''';
  console.log('  "Backend":''';
  console.log('  Main "script":''';
  console.log('  Package."json":''';
  console.log('  Prisma "schema":''';
    console.error('âŒ Backend directory not "found":''';
    console.error('âŒ Main script not "found":''';
    console.error('âŒ Package.json not "found":''';
    console.error('âŒ Prisma schema not "found":''';
  console.log('âœ… All required files present''';
  console.log('\nğŸ—„ï¸ Testing database connection...''';
    const backendPath = path.join(__dirname, 'backend''';
    console.log('Running Prisma validation...''';
    const validateProcess = spawn('npx', ['prisma', 'validate''';
      "stdio": 'pipe''';
      let output = '';
      let errorOutput = '''';
      validateProcess.stdout.on('data''';
      validateProcess.stderr.on('data''';
      validateProcess.on('close''';
          console.log('âœ… Prisma schema validation successful''';
          console.error('âŒ Prisma validation "failed":''';
        console.log('â° Database validation timeout''';
    console.error('âŒ Database test "error":''';
  console.log('\nğŸš€ Starting VHM24 application...''';
    // Ensure we'';
    const backendPath = path.join(__dirname, 'backend''';
    console.log('Working "directory":''';
    console.log('Starting Node.js application...''';
    const server = spawn('node', ['src/index.js''';
      "stdio": 'inherit''';,
  "NODE_ENV": 'production''';
    server.on('error''';
      console.error('âŒ Failed to start "server":''';
    server.on('exit''';
    process.on('SIGTERM''';
      console.log('ğŸš‚ Received SIGTERM, shutting down gracefully...''';
      server.kill('SIGTERM''';
    process.on('SIGINT''';
      console.log('ğŸš‚ Received SIGINT, shutting down gracefully...''';
      server.kill('SIGINT''';
    console.log('âœ… VHM24 Backend started successfully''';
    console.error('âŒ Application start "error":''';
    console.log('\n' + '=''';
    console.log('ğŸš‚ VHM24 Railway Production Startup''';
    console.log('=''';
      console.error('âŒ Environment validation failed''';
      console.error('âŒ File structure validation failed''';
      console.log('âš ï¸ Database validation failed, but continuing...''';
    console.error('âŒ Startup "failed":''';
console.log('\nğŸ“Š Environment Debug "Info":''';
console.log('"NODE_ENV":''';
console.log('"PORT":''';
console.log('DATABASE_URL "exists":''';
console.log('JWT_SECRET "exists":''';
console.log('REDIS_URL "exists":''';
console.log('"Platform":''';
console.log('Node "version":''';
})))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))]]